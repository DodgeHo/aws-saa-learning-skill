---
source: 08 - High Availability and Scalability ELB & ASG\005 Application Load Balancer (ALB) - Hands On - Part 1_zh.srt
---

# ALB 实操（第 1 部分）

## 学习目标
- 启动两台实例作为后端
- 创建 ALB 与目标组
- 验证负载均衡基础路径

## 重点速览
- ALB 处理 HTTP/HTTPS
- 目标组绑定实例并做健康检查
- 负载均衡器需配置安全组与多 AZ

## 详细内容
准备 EC2 实例：
1. 启动 2 台 Amazon Linux 2（如 `t2.micro`）。
2. 选择允许 HTTP 的安全组。
3. 使用用户数据部署简单 Web 页面（验证用）。

创建 ALB：
1. 在 **Load Balancers** 选择 **Application Load Balancer**。
2. 类型选择 **Internet-facing**，启用多个 AZ。
3. 创建仅允许 HTTP 的安全组（如 `demo-sg-load-balancer`）。

创建目标组：
1. **Target type** 选 **Instances**。
2. 协议 `HTTP`，端口 `80`。
3. 注册两台 EC2 实例并创建目标组。

将目标组绑定到 ALB 的监听器后创建负载均衡器。

## 自测问题
- 为什么 ALB 需要目标组？
- 负载均衡器安全组通常开放哪些端口？

我回到这个页面, 我可以看看我的负载均衡器｡

现在它在配置空间中,

所以我们需要等待它被配置｡

所以我的ALB现在是活跃的, 它准备好了｡ 

正如你所看到的, 这里有一个DNS名称｡ 

所以我将复制它, 将其粘贴到一个新的选项卡中,

通过应用程序负载均衡器, 我可以得到一个hello

world｡

但最酷的是,

如果我刷新这个页面,

并继续刷新它, 那么你可以看到目标正在改变｡

这是因为我的应用程序负载均衡器实际上在两个EC2实例之间重定向,

这非常酷｡

这证明了负载平衡确实在发生｡

我们怎么知道？

好吧, 如果我们去我们的目标群体,

这一个, 我们看看我的目标群体的目标, 你可以看到他们都是健康的｡

这意味着应用程序负载均衡器将通过目标组向它们发送流量,

一个接一个｡

目标群体非常聪明, 因为如果我以我的第一个实例为例,

我停止了它, 通过这个, 我们正在做的是, 我们停止了我们的两个实例, 因此它将是不健康的, 因为它不能再响应进来的流量｡

所以如果我进入我的目标群体,

也许我太快了, 让我们看看,

刷新, 所以我会等大约30秒｡

现在可以看到, 第一个实例未使用,

因为它处于停止状态｡

因此, 如果我返回到应用程序平衡器并刷新,

我得到的这个实例的唯一响应是一个仍在运行的实例｡

这就是使用负载均衡器的强大之处,

因为它们知道目标何时健康或不健康｡

所以这个实例被停止了,

但是当然, 如果我恢复它, 如果我再次启动它, 它就会启动,

并在后台创建服务｡

所以让我们等待实例启动, 希望我们能再次看到它在我们的目标组中是健康的｡

实例现在已经启动,

我们处于初始健康状态, 如您所见, 现在我们处于健康状态｡

所以这个实例被认为是健康的,

所以如果我回到我的应用程序平衡器并刷新,

正如你现在所看到的, hello world来自两个实例｡

就这样, 我们已经练习了负载均衡器,

我们在目标组中创建了一个和两个目标｡

希望你们喜欢, 下次课再见｡
