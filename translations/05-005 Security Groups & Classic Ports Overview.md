---
source: 05 - EC2 Fundamentals\005 Security Groups & Classic Ports Overview_zh.srt
---

Stephane：让我们来讨论一下EC2实例周围的这些防火墙｡

我们在上一讲中简单配置了一个安全组,

但安全组将再次成为AWS云中网络安全的基础｡

它们将控制如何允许流量进出您的EC2实例｡

安全组将非常简单,

它们只包含允许规则,

因此我们可以确定哪些内容可以进入和离开,

安全组可以具有通过IP地址（即您的计算机来自何处）或通过其他安全组引用的规则,

因此我们将看到, 安全组可以相互引用｡

这里, 让我们举一个例子,

我们在自己的计算机上, 因此我们在公共互联网上,

我们试图从我们的计算机访问我们的EC2实例｡

我们将围绕EC2实例创建一个安全组,

即围绕该实例的防火墙, 然后此安全组将具有规则｡

而这些规则将要说明是否有些入站流量,

因此从外部进入EC2实例是允许的,

并且还说明EC2实例是否可以执行某些出站流量｡

所以要从哪里谈它是进入互联网｡ 

现在让我们做一个更深层次的研究, 好吗？

安全组是我们EC2实例上的防火墙,

它们将管理对端口的访问｡

他们将看到授权的IP范围｡ 

是在IPv4上还是在IPv6上？

这是互联网上的两种IP, 它将控制入站网络｡

因此, 从外部到实例, 以及从实例到外部的其他网络,

当我们查看安全组规则时, 它们看起来就像这样｡

因此, 它们将是类型､ 协议､ TCP､ 允许它的端口､

流量在实例上可以通过的位置以及代表IP地址范围和0的源｡

0个0｡  0/0表示所有内容,

此处仅表示一个IP｡

因此, 您不需要知道如何为（模糊）考试正确配置安全组,

但它们非常重要, 所以我想谈谈它们｡

现在, 让我们看一下图表, 对吗？

因此, 我们有EC2实例,

它有一个安全组allow, 它有入站规则和出站规则｡

所以我把它们分开画在这张图上｡ 

因此, 我们的计算机将在端口22上获得授权｡ 

因此, 流量可以从我们的计算机传输到EC2实例,

但其他人的计算机没有使用我的IP地址,

因为他们不在我所在的位置,

如果他们尝试访问我们的EC2实例, 他们将无法通过, 因为防火墙会阻止它,

这将是一个超时｡

然后, 对于出站规则, 默认情况下,

任何安全组的EC2实例都将默认允许任何流量流出｡

因此, 我们的EC2实例如果尝试访问网站并启动连接,

安全组将允许它｡

这是防火墙工作原理的基本知识｡ 

现在很高兴知道,

您需要了解安全组的哪些信息？

它们可以连接到多个实例上

安全组和实例之间不是一对一的关系,

实际上一个实例也可以有多个安全组｡

安全组被锁定到一个区域/VPC组合,

好吗？

因此, 如果您切换到另一个区域,

则必须创建一个新的安全组,

或者如果您创建另一个VPC（我们将在稍后的课程中了解什么是VPC）, 则必须重新创建安全组｡

安全组位于EC2之外｡ 

因此, 正如我所说, 如果流量被阻塞,

EC2实例甚至不会看到它｡

好的, 它不像运行在EC2上的应用程序,

它实际上是EC2实例外部的防火墙｡

老实说, 这只是开发人员对您的建议,

但最好只为SSH访问维护一个单独的安全组, 通常SSH访问是最复杂的事情,

您真的希望确保正确地完成一个安全组｡

因此, 我通常将SSH访问的安全组分开｡

如果您的应用程序不可访问, 则会超时,

我们在上节课中看到了这一点,

这是安全组问题｡

如果您尝试连接到任何端口,

而计算机只是挂起､ 等待､ 等待,

这可能是安全组的问题, 但如果您收到连接被拒绝错误, 您实际上会得到响应,

连接被拒绝, 那么安全组实际上工作, 流量通过, 应用程序出错或未启动, 或类似的情况｡

这就是连接被拒绝后的结果｡

默认情况下, 所有入站流量都被阻止,

所有出站流量都被授权, 明白吗？

现在有一个我非常非常喜欢的小高级功能,

我认为如果您开始使用负载平衡器,

它将是完美的, 我们也将在下一节课中看到它,

即如何从其他安全组引用安全组｡

让我来解释一下｡ 

我们有一个EC2实例, 它有一个安全组,

我称之为组1, 入站规则基本上是说, 我授权安全组1入站和安全组2入站｡

那我们为什么要这么做

如果我们启动另一个EC2实例,

并且该实例连接了安全组2, 那么, 通过使用我们刚刚设置的安全组（模糊）规则,

我们基本上允许EC2实例直接通过我们决定的端口连接到第一个EC2实例｡

类似地, 如果我们有另一个EC2实例,

其中附加了一个安全组1,

同时我们还授权这个实例直接与我们的实例通信｡

因此, 不管EC2实例的IP是什么,

因为它们都连接了正确的安全组, 所以它们能够直接与其他实例通信｡

这太棒了, 因为它不会让你一直想着IP｡

如果您有另一个EC2实例,

其中可能附加了安全组3, 因为安全组1的入站规则中未授权组3, 所以它将被拒绝,

无法正常工作｡

这是一个高级特性, 但我们将在处理负载平衡器时看到它,

因为它是一个非常常见的模式｡

我只是想让你们了解一下,

再一次记住这个图表, 到现在为止,

你们应该非常非常擅长安全组, 并正确地理解它们｡

现在进入考试, 您需要了解哪些端口？

我们需要了解SSH或安全外壳,

我们将在下节课中学习.

这是端口22｡ 

这允许您登录到Linux上的EC2实例｡ 

您有FTP或文件传输协议的端口21,

用于将文件上载到文件共享｡

您有SFTP, 它也使用端口22, 为什么？

因为我们要上传文件,

但这次使用SSH,

因为它是一个安全文件传输协议｡

然后是HTTP端口80, 我们在上一课中已经使用过了｡

这是为了访问不安全的网站｡ 

当你上网的时候, 你会看到这个,

你输入HTTP：//, 然后是网站的地址｡

你可能已经看到了很多类似的东西, 你已经看到了HTTPS,

它是用来访问安全网站的, 这是当今的标准｡

而对于HTTPS, 则是端口443｡ 

最后, 你需要记住的最后一个端口是RDP的3389,

或者是远程桌面协议, 它是用来登录到Windows实例的端口, 好吗？

因此, 22是Linux实例的SSH,

而3389是Windows实例的RDP｡

这就是所有关于安全组的理论｡ 

我会在下一节课上和你们一起练习｡
