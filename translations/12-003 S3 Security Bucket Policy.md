---
source: 12 - Amazon S3 Introduction\003 S3 Security Bucket Policy_zh.srt
---

讲师：现在我们来谈谈Amazon S3-安全性｡ 

第一部分是基于用户的｡ 

因此, 作为用户, 您可以拥有IAM策略,

您和此IAM策略将授权特定IAM用户应允许哪些API调用｡

您也可以使用基于资源的安全性｡ 

所以这是新的｡ 

我们可以使用所谓的S3 Bucket策略,

您可以直接从S3控制台分配桶范围的规则｡

这将允许, 例如, 一个特定的用户进入或允许另一个帐户的用户,

这被称为跨帐户访问您的S3桶｡

这也是我们将S3 Bucket公开的方式,

稍后我将向您展示｡

接下来, 您会看到对象访问控制列表（ACL）,

它们是更细粒度的安全性, 并且可以禁用｡

如果您需要进入存储桶级别,

则可以使用存储桶ACL, 这是一种不太常见的ACL,

也可以禁用｡

现在在Amazon S3 Bucket上实现安全性的最常用方法是使用Bucket策略｡

那么, 在什么情况下IAM主体可以访问S3对象呢？

如果IAM权限允许, 或者如果资源策略允许,

并且操作中没有显式拒绝,

则IAM主体可以访问指定API调用上的S3对象｡

我们稍后将看一下这些使用情形｡ 

最后, 在Amazon S3上实现安全性的另一种方法是使用加密密钥对对象进行加密｡

那么, S3 Bucket策略实际上是什么样子的呢？

因为这是我们S3-Security的重点｡ 

它们是基于JSON的策略, 看起来像这样｡ 

这是JSON文档, 非常容易阅读｡ 

首先, 您有一个资源块,

该资源会告诉策略此策略应用于哪些存储桶和对象｡

在这里我们可以看到, 这适用于示例Bucket中的每个对象,

这就是星号的作用｡

接下来我们有效果｡ 

那么, 允许或拒绝, 我们允许或拒绝什么呢？

我们拒绝行动.

因此, 我们有一组API, 我们可以允许或拒绝,

在本例中, 我们允许的操作是GetObject｡

所以这就允许任何人感谢原则, 原则提出帐户或用户应用策略,

所以原则是明星｡

所以, 在这里我们允许任何带星号的人来GetObject, 所以要从我的例子Bucket中检索一个带星号的对象,

那就意味着它里面的任何对象｡

因此, 这个S3 Bucket, 在我的Buckets中的所有对象上设置公共读取｡

因此, 我们可以使用S3 Bucket策略来授予对Bucket的公共访问权限（如右侧所示）,

或者强制在上载时对对象进行加密,

或者向另一个帐户授予访问权限｡

那么让我们来看看现在的情况｡ 

这是公共访问的存储桶策略｡ 

我们有一个用户, 他在万维网上, 是一个网站访问者,

他想访问我们S3 Bucket中的文件｡

因此, 我们将附加一个允许公共访问的S3

Bucket策略｡

这就是您在上一张幻灯片中看到的｡ 

一旦将此Bucket策略附加到S3 Bucket,

我们就可以访问其中的任何对象｡

这就是我们将在实践中看到的｡ 

但另一种方法是,

如果您的帐户中有一个用户,

即IAM用户, 并且该用户希望访问Amazon

S3, 那么我们可以通过策略为该用户分配IAM权限｡

因此, 由于策略允许访问S3 Bucket,

因此用户现在就可以访问我们的S3

Bucket｡

如果我们有一个EC2实例, 并希望从EC2实例授予对S3

Buckets的访问权限, 那么我们已经看到IAM用户是不合适的｡

我们需要改用IAM角色｡ 

因此, 我们创建一个具有正确IAM权限的EC2实例角色,

该EC2实例将能够访问Amazon S3 Buckets｡

更高级的是,

如果我们希望允许跨帐户访问, 则必须使用Bucket策略｡

因此, 我们在另一个AWS帐户中有一个IAM用户,

我们创建了一个S3 Bucket策略,

该策略允许该特定IAM用户进行跨帐户访问, 因此IAM用户将能够对我们的S3

Bucket进行API调用｡

您需要了解的其他安全设置是“阻止公共访问”的“存储桶”设置｡

这就是我们在创建Buckets时设置的内容,

这些设置是AWS发明的,

作为防止公司数据泄露的额外安全层｡

因此, 即使您将设置一个S3 Bucket策略,

使其成为公共的, 如果启用了这些设置,

Bucket将永远不会成为公共的｡

所以这是为了防止数据泄露｡ 

因此, 如果您知道您的Bucket永远不应该是公共的,

那么请将这些设置保留为打开状态,

这样您就有了这种级别的安全性,

可以防止设置错误的S3 Bucket策略的人｡

如果您知道您的S3

Bucket都不应该是公共的, 那么您可以在帐户级别进行设置｡

好了, S3安全部门就到这里了

现在让我们进去动手练习吧｡
