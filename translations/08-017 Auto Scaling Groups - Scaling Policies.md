---
source: 08 - High Availability and Scalability ELB & ASG\017 Auto Scaling Groups - Scaling Policies_zh.srt
---

讲师：所以我们有几种伸缩策略｡

第一个是动态缩放, 在这个类别中,

我们有目标跟踪缩放, 这是非常简单的设置｡

这个想法是你为你的ASG定义一个指标,

例如, CPU利用率, 你定义一个目标值,

例如, 40%｡

自动地, ASG将向外扩展或向内扩展, 以允许您将此指标保持在40%左右｡

我们也有简单或分步伸缩,

其想法是您定义CloudWatch警报,

当您想要向自动伸缩组添加容量单位或想要删除自动伸缩组的容量单位时会触发这些警报｡

然后, 我们有预定的缩放｡ 

这就是你根据已知的使用模式预期扩展的时候｡

例如, 你说你知道每周五下午5：00,

你都会有新用户, 因此你想把最小容量增加到10｡

然后我们有预测缩放｡ 

所以这是当你不断预测负载, 然后你开始提前调度｡

所以当你有重复的模式时, 这是非常好的｡

因此, ASG将自动分析历史负载,

然后生成预测, 然后根据预测安排扩展操作,

如果您有周期性数据, 这将非常方便｡

因此, 一些好的衡量标准是一个大问题｡ 

因此, 这实际上取决于您的应用程序正在做什么以及它是如何工作的｡

但通常, 这里有一些｡ 

所以第一个是CPU利用率, 因为每次你的实例收到一个请求,

通常, 他们会做一些计算, 所以它会使用一些CPU｡

因此, 如果您查看所有实例的平均CPU利用率,

并且它变得更高, 这意味着您的实例正在被更多地利用｡

所以这将是一个很好的衡量标准｡ 

另一个可扩展的指标, 它更特定于应用程序,

但它是一个RequestCountPerTarget,

它基于您的测试, 您知道您的EC2实例在每个目标每次1,

000个请求的最佳请求下运行, 因此这可能是您希望用于扩展的目标｡

举个例子｡ 

您有一个包含三个EC2实例的自动伸缩组,

您的ALB当前正在将请求分散到所有这些实例中｡

因此, 现在每个目标度量的请求计数值为3,

因为每个EC2实例平均有3个未完成的请求｡

接下来, 如果您的应用程序是网络绑定的,

例如有很多上传和下载, 并且您知道网络将成为EC2实例的瓶颈, 那么您可能希望在平均网络上进行扩展, 以确保如果您达到某个阈值,

那么您将基于此进行扩展｡

或者任何你推送到CloudWatch的自定义指标,

这样你就可以设置你自己的指标,

这些指标将是特定于应用程序的,

并基于此, 你可以设置你的扩展策略｡

关于缩放策略, 你需要知道的最后一件事是缩放冷却时间｡

所以这个想法是, 在有一个扩展活动之后,

所以每当你添加或删除实例时, 你都会进入冷却期, 默认情况下是5分钟或300秒｡

在冷却期间,

ASG将不会启动或终止其他实例｡

这种推理背后的原因是,

您允许指标稳定, 以便新实例生效并查看新指标将变成什么｡

所以这个想法是, 当有一个缩放动作发生时,

问题是, 是否有一个默认的冷却时间？

如果是, 则忽略该操作｡ 

如果否, 则继续执行伸缩操作,

即启动或终止实例｡

因此, 建议您使用即用型AMI来减少EC2实例的配置时间,

以便它们更快地为请求提供服务｡

因此, 如果您不花时间配置您的EC2实例,

那么它们可以立即生效｡

然后, 因为他们可以更快地激活,

那么冷却时间可以减少,

你可以有一个更动态的缩放你的ASG｡

当然, 您需要确保为您的ASG启用详细的监控,

以便每分钟访问一次指标, 并确保这些指标更新得足够快｡

这节课就到这里｡ 

希望你们喜欢, 下次课再见｡
