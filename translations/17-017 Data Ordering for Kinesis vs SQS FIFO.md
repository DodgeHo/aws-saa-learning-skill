```markdown
**学习目标**

- 理解 Kinesis 与 SQS FIFO 在数据排序与并行消费模型上的差异。
- 掌握如何使用分区键（Kinesis）或消息组 ID（SQS FIFO）实现按键排序与并行化处理。

**重点速览**

- Kinesis：通过分区键哈希映射到分片（shard），同一分区键的记录保证在同一分片内排序；吞吐由分片数决定。
- SQS FIFO：通过消息组 ID 保证组内顺序与去重，使用多个组可并行化消费者，但总体吞吐受 FIFO 限制（默认 ~300 TPS）。

**详细内容**

- 对比要点：
  - Kinesis 更适合大量设备/实体（如数千卡车）按键分散到分片，每个分片可并行消费；分片数量决定最大并发消费者数（每分片一个消费者）。
  - SQS FIFO 通过消息组 ID 提供顺序与一次投递保证，可为每个组独立并行处理，但需显式设计组数以获得并发度；FIFO 吞吐低于标准队列/流。
  - 选择指南：若需高吞吐与按键排序（设备级顺序）且可管理分片 -> 选 Kinesis；若需强顺序与去重且吞吐不高 -> 选 SQS FIFO。

**自测问题**

1. 对于 100 辆卡车的按车序 GPS 数据采集，何时选 Kinesis，何时选 SQS FIFO？
2. Kinesis 中如何确保同一车的所有记录都保持顺序？

```
