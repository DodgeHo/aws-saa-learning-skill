---
source: 10 - Route 53\014 Routing Policy - Geolocation_zh.srt
---

- ：现在我们来讨论一下路由策略-地理定位, 它与基于延迟的路由策略有很大不同｡

因此, 这是基于用户的实际位置｡ 

所以, 举个例子, 你可以说,

如果一个用户来自一个特定的大陆, 或者一个国家, 或者更准确地说,

在美国｡ S的｡  状态, 并且,

首先将选择最精确的位置,

然后将其路由到此IP｡

因此, 您应该创建一个默认记录,

以防在位置上没有匹配项, 并且此记录的使用情形将用于网站本地化､

限制内容分发､ 执行负载平衡等｡

并且这些类型的记录可以与运行状况检查相关联｡

因此, 我们的想法是, 如果我们有一个欧洲地图,

有多个国家, 我们可以定义一个德国的地理位置记录,

看看德国用户应该去这个IP, 其中包含我的德语版本的应用程序｡

如果我去法国, 那么就去这个IP, 它包含了我的应用程序的法语版本｡

但是对于其他任何地方, 请转到这里的默认IP,

其中可能包含我的应用程序的英文版本｡

这就是地理定位的使用方法

现在, 让我们在控制台中练习｡ 

好的, 那么, 让我们继续, 创建我们的第一个地理记录｡ 

我将创建一条记录, 并将其设为geo,

记录类型为A, 其值为, 我们先将其链接到ap-seouthern-1｡

我们在这里要做的是,

路由策略将是地理定位｡

我们说, 好的, 所有亚洲, 所以,

任何位于亚洲的用户, 都应该转到我的ap-setheast-1

EC2实例｡

如果需要, 我们可以将运行状况检查与它关联,

我们需要提供一个记录ID, 现在开始｡

现在, 让我们再添加两条记录｡ 

所以我要做的是, 我会说这是,

对于us-east-1｡

我想发送来自的任何用户,

我们可以再次说地理定位｡

比如说, 一个国家,

我们可以说, 美国｡

最后, 我们可以说, 这是记录ID, U｡  S的｡  所以, 你们可以看到, 我指定了一个国家,

这里指定了整个大陆, 这并不重要｡

最后, 我们再添加一条记录, 这是记录名称,

其值为eu-central-1｡

这是我的默认位置, 地理位置是默认位置,

这意味着任何与亚洲或美国不匹配的内容都将转到我的默认位置, 这一个将被称为“默认欧盟”｡

现在, 它正在创建这些记录,

它们已经成功创建｡

所以, 我现在能做的就是测试它, 对吧？

所以, 目前, 我不在美国｡  S的｡  , 而我又不在亚洲｡ 

如果我打开这个URL,

我将得到eu-central-1区域, 这很好, 这意味着这是默认记录,

是纯记录, 工作正常｡

现在, 让我们改变地理位置,

为此, 我将使用我的VPN, 现在让我们转到亚洲的一个国家,

所以让我们转到印度｡

所以, 我现在连接到印度｡ 

当我现在刷新这个页面时, 我希望从我的ap-seouthern-1实例中得到一个Hello

World｡

如您所见, 这是一个很长的负载, 我知道发生了什么,

这是一个超时, 因此, 每当您在AWS中看到超时时, 通常您必须考虑安全组｡

因此, 如果我转到我的安全组, 是的,

我在正确的区域中, 即在新加坡区域中,

查看入站规则, 并编辑它们｡

如果您还记得, 我已经删除了使运行状况检查失败的HTTP规则,

因此, 我们需要重新添加该HTTP规则,

现在我们将其重新添加, 屏幕上的编辑效果很好｡

HTTP规则已添加回来, 现在, 如果我返回此页面, 我们可以看到,

现在, 我们从ap-setheast-1b获得Hello

World, 因此, Asia功能正常工作｡

现在, 如果我去美国的一个国家｡  S的｡  如果我去美国, 总的来说, 我在美国｡

S的｡  然后刷新,

我将从us-east-1a获得Hello World, 这样就完美了｡

而且, 如果我去的地方就在U｡  S的｡  但在美国没有｡  S的｡  , 比如说, 如果我去墨西哥｡ 

然后刷新, 如您所见, 我得到了eu-central-1c, 因为这是我的默认记录, 并且, 在地理位置Route 53记录中没有将Mexico指定为规则｡

好吧, 就是这样, 这是完美的工作｡ 

我希望你们喜欢这节课,

下节课再见｡
