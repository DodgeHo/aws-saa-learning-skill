---
source: 19 - Serverless Overviews from a Solution Architect Perspective\008 Lambda in VPC_zh.srt
---

- ：现在我们来谈谈Lambda的一些网络基础知识｡

因此, 默认情况下, 当您启动函数时, 它们将在您自己的VPC之外启动｡

它们实际上是在AWS自己的VPC中启动的｡ 

因此, 您无法访问VPC中的资源｡ 

因此, 如果您启动RDS数据库､ ElastiCache缓存或内部负载平衡器,

那么您的Lambda函数将无法访问它｡

这是默认的Lambda部署｡ 

如果它需要访问互联网上的任何公共API,

它将工作｡

如果它需要访问DynamoDB,

它将工作, 因为DynamoDB是AWS云上的公共资源｡

但是, 如果您有专用RDS数据库,

则连接将不起作用｡

你知道这意味着什么,

我们需要在你的VPC中启动你的Lambda函数｡

这是一个您可以执行的选项,

因此您需要指定您的VPC ID､ 您要启动的子网, 并将安全组附加到Lambda函数｡

然后, 您的Lambda将在您的子网中拥有一个弹性网络接口,

因此它将能够访问您的Amazon RDS,

例如, 在您的VPC中运行｡

这就是我们在私有子网中启动Lambda函数的方式｡

因此, 您将拥有与VPC中任何内容的私有连接,

这很好｡

因此, 在VPC中使用Lambda的一个主要用例是将Lambda与RDS代理一起使用｡

同样, 我们在私有子网中有一个RDS数据库, 但我们有Lambda函数,

它们可以直接访问它｡

但问题是,

如果它们直接访问您的RDS数据库,

这将是一个巨大的问题,

因为如果您有许多函数随着时间的推移出现和消失, 那么您的RDS数据库上可能会有太多处于高负载状态的打开连接, 这将导致超时和问题｡

因此, 您要做的是启动RDS代理, 该代理将拉取连接,

并使用较少的连接连接到您的RDS数据库实例｡

因此, 您的Lambda函数现在连接到RDS代理,

该代理连接到RDS数据库实例,

您已经解决了架构问题｡

因此, RDS代理的三个好处是：第一,

它通过拉取和共享数据库连接来提高可伸缩性｡

此外, 在故障转移的情况下,

这将通过减少66%的故障转移时间和保留连接来提高可用性｡

当然, 这是针对RDS和Aurora的｡ 

此外, 如果您希望强制执行IAM身份验证,

则可以在RDS代理级别强制执行,

并将这些详细信息存储在机密管理器中｡

因此, 为了让Lambda函数连接到RDS代理,

您需要在VPC中启动Lambda函数（如果有意义的话）, 因为RDS代理永远无法公开访问｡

因此, 如果您公开启动Lambda函数,

您将无法通过网络连接到RDS代理,

因为它从不公开｡

因此, 如果你理解这一点,

你将能够解决一个或两个问题的考试｡

好吧, 就这样｡ 

希望你喜欢｡ 

我们下节课再见｡
