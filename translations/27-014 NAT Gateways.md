---
source: 27 - Networking - VPC\014 NAT Gateways_zh.srt
---

既然我们已经讨论了Nat实例, 让我们来看看Nat网关｡ 

所以Nat网关在那里要好得多｡ 

当然是管理nat实例, 而且它们的带宽更高｡ 

有高可用性｡ 

你可以做进去, 没有管理｡ 

因此, 您将为Nat网关按小时的使用和带宽付费, 并且Nat网关将在特定的AZ中创建,

并且它将继承弹性IP｡

现在它不能与同一子网内的EC2实例一起使用｡ 

好的, 所以Nat网关只有在从另一个子网访问时才有帮助｡ 

因此, 我们将在公共子网中创建一个Nat网关, 并将其连接到私有子网中的实例｡

现在它的工作原理是从私有子网到Nat网关再到Internet网关｡

好吧, 没有互联网网关, Nat网关就无法工作｡ 

现在带宽是每秒5千兆比特｡ 

自动扩展到每秒100千兆位｡ 

您不需要管理任何安全组｡ 

这不是必需的

因此, 这意味着我们不需要考虑启用哪些端口来实现连接｡ 

所以它的工作方式是, 现在我们有这个设置, 好的, 有一个私有实例和私有子网,

它不能访问互联网｡

因此, 我们将在公共子网中创建一个Nat网关, 而Nat网关将部署在公共子网中｡

并且公共子网已经连接到Internet网关｡ 

然后Nat网关将具有Internet连接, 然后我们将编辑私有子网的路由｡

通过编辑它们, 我们将能够将EC2实例连接到Nat Gateway｡ 

现在我们来谈谈高可用性和nat网关｡ 

因此, Nat网关仅在单个可用区内具有弹性｡ 

因此, 它将在单个AZ内是冗余的, 但如果AZ出现故障, 则需要在多个AZ中具有多个Nat网关以实现容错｡

它的工作原理是这样的｡ 

因此, 目前我们有一个Nat网关, 它位于一个特定的AZ中｡ 

我们将在第二个AZ中创建第二个Nat网关｡ 

因此, 正如您所看到的, 每个网络流量都被限制在一个AZ中, 因此如果有一个AZ出现故障,

好吧, 整个AZ碰巧都出现故障, 那么我们仍然可以使用AC, 因为ACP中存在Nat网关,

并且不需要通过路由表将AZ连接在一起, 因为, 如果AZ关闭, 则该AZ中的所有EC2实例当前也不可访问｡

现在让我们来谈谈Nat Gateway和Nat实例之间的区别,

但这应该是非常明显的｡

因此, Nat Gateway在特定的AZ内具有高可用性, 如果您想要在AZ上获得高可用性,

则需要在另一个AZ中创建另一个, 而在该实例中, 您需要使用脚本来管理Nat实例之间的故障转移并管理它们｡

总的来说, 每个Nat网关的带宽高达每秒100千兆比特｡ 

对于该实例, 这取决于您拥有的EC2实例类型, 但实例类型越高, 您将拥有的吞吐量越大｡

维护显然是Nat Gateway的托管服务, 而它是由您为实例管理的｡

我们需要确保你有软件, 操作系统补丁等等｡ 

成本是Nat网关的每小时成本加上数据传输量, 而对于Nat实例,

它是EC2实例的每小时成本, 这显然取决于EC2实例的类型和大小｡

此外, 您还需要为通过EC2实例传输到Internet的网络数据付费｡ 

好吧, 我会的

现在Nat网关有一个公共IPv4和一个私有IPv4｡ 

所以这很好｡ 

对于那个实例也是一样｡ 

现在, 安全组不用于Nat Gateway, 这实际上是一件好事, 因为,

好吧, 你不需要再管理一件事, 而对于那个实例, 你需要设置你的安全组,

并确保它们是紧密的, 并为正确的端口工作, Nat Gateway不能用作堡垒主机,

而Nat实例可以用作堡垒主机, 如果我们想的话｡

这两件事之间有很多不同之处, 这里有一个联系｡ 

但从考试的角度来看, 这应该足以回答选择Nat网关还是Nat实例的任何问题｡

这节课就到这里｡ 

希望你们喜欢, 下次课再见｡
