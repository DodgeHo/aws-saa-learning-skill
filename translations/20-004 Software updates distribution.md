---
source: 20 - Serverless Solution Architecture Discussions\004 Software updates distribution_zh.srt
---


## 学习目标

- 理解如何用 CloudFront 缓存已有的非动态软件更新分发，从而降低 EC2/源站负载与成本。
- 掌握无需重构应用即可通过边缘缓存提升扩展性与可用性的思路。

## 重点速览

- 问题：EC2 上分发静态软件更新会引起高带宽和 CPU 负载，成本上升。
- 解决方案：在现有架构前端增加 CloudFront，将静态更新在边缘缓存，从而减少对源站（EFS/EC2）的请求。
- 好处：无需改动应用逻辑，降低自动伸缩触发频率，节省网络与计算成本，提高可用性。

## 详细内容

- 场景说明：
	- 假设当前有 ELB + ASG 的应用在多个 AZ 运行，软件更新文件保存在 EFS（或 EC2 上），当新补丁发布会有大量并发下载请求。 

- 采用 CloudFront 的设计：
	- 在分发前端部署 CloudFront，将 EFS/EC2 作为源（或将文件复制到 S3 并以 S3 为源）。
	- CloudFront 在全球边缘节点缓存静态更新文件，后续用户从边缘获取，显著降低源站请求量。 

- 优势与注意事项：
	- 优势：减少源站带宽与 CPU 使用、降低 ASG 扩展频率、提升可用性和用户体验。 
	- 注意：确保缓存策略（TTL、版本化）设置正确以便在发布新版本时能够刷新或失效旧缓存；若使用 EFS 做源，考虑把静态文件移到 S3 以获得更好与 CloudFront 的集成体验。 

## 自测问题

- 为什么在分发静态软件更新时，CloudFront 能显著降低源站负载？
- 如果你需要在发布新版本后强制刷新缓存，应该如何设计版本或失效策略？
- 当源是 EFS 而非 S3 时，如何评估是直接用 EFS 作源还是把文件同步到 S3？

## 术语与易错点（将在全部章节完成后汇总）

- （统一汇总，稍后添加）
