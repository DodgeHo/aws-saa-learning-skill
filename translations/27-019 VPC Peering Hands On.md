---
source: 27 - Networking - VPC\019 VPC Peering Hands On_zh.srt
---

- ：好吧, 让我们来玩一玩对等VPC｡ 

所以我们要做的是将两个VPC对等在一起｡ 

因此, 演示VPC和这个我将称之为默认VPC,

这是用我的帐户创建的VPC｡

所以我们要把它们放在一起, 好吗？

这是好事｡ 

要做到这一点, 我首先要证明VPC没有连接｡

为此, 我将进入EC2管理控制台的实例下,

启动一个实例, 然后向下滚动｡

我将向下滚动｡ 

密钥对将选择演示密钥对, 但将不需要它｡ 

然后, 我们将进行网络设置, 在默认VPC中启动此安全组,

并创建添加了SSH规则的安全组launch-wizard-2｡

这很好｡ 

让我们启动该实例, 然后就可以开始了｡ 

好吧, 我会的

现在我们有了BastionHost｡ 

请记住, 如果该网站可用, 那么我们就有了这个实例,

我将称之为默认VPC实例, 好吗？

我想做的是连接并确保此默认实例VPC可以连接到我的BastionHost中的实例｡

现在, 如果我看一下IPS, 好吗？

我们可以看到私有的ipv4更有趣｡ 

所以我们可以看一下这里大概没有｡ 

因此, 如果我们查看私有IPv4地址, 则该地址为172｡

31. 36. 159.

而之前的这个是10｡  0. 0/72.

我们可以看出它们位于不同的VPC中,

因为私有的IP地址非常不同｡

因此, 让我们使用EC2实例连接来连接到这个实例｡ 

好了, 我们接通了｡ 

让我们也连接到我的BastionHost｡ 

所以我的实例在我的其他公共科目｡ 

好吧, 我会的

所以如果我们先做一个旋度然后再做10个｡  0. 0. 0. 72：80,

这是我的IP｡

所以我们得到了一个hello world｡ 

所以这是工作正常, 好吗？

但是如果我们执行完全相同的curl命令,

我们在这里, 在这个IP上执行curl, 好吗？

这是172号的｡  31类型实例｡ 

我们把这个实例卷起来, 然后按回车键.

这样不行.

我们有时间｡ 

因为现在这个VPC中的EC2实例无法连接到另一个VPC中的两个实例｡

这就是它被称为虚拟私有云IaaS的原因,

因为它们从网络角度来看是隔离的｡

所以我们要把它们联系起来｡ 

要做到这一点,

我们需要创建一个对等连接｡

因此, 在生命线方面, 存在对等连接｡ 

我将创建一个对等连接,

并将其称为演示对等连接, 我们需要选择一个本地VPC进行对等｡

我们假设请求者是我的演示VPC, 然后选择另一个VPC进行连接｡

它在我的帐户中, 但也可能有另一个帐户,

它在这个区域, 但也可能是另一个区域｡

VPC的接受者将成为具有此CIDR的默认VPC｡

正如我们所看到的, 此CIDR和该CIDR不重叠,

因此可以创建此VPC对等连接｡

因此, 让我们创建此对等连接,

并等待接受｡

因此, 在我们现在接受之前, 这是不起作用的, 因为两个VPC都在我们的帐户中｡

我们自己可以接受这个要求, 所以我们可以接受｡ 

但如果不是其他人的话,

我们当然可以否认｡

因此, 在本例中,

请求者所有者ID和接受者ID是相同的｡

所以我们接受这个请求吧｡ 

现在它说要通过这个VPC对等连接发送和接收流量,

你必须在一个或多个VPC路由表中向VPC周期添加路由｡

因此, 这一点非常重要, 即使存在VPC对等连接,

我们仍需要修改路由表｡

如果我试着做一个旋度, 不是从这个例子开始而是从这个例子开始,

还是不起作用？

所以让我们来解决这个问题｡ 

所以我们现在去修改我的路由表｡ 

所以我们有一个公共路由表, 这里有我会找到正确的路由表｡

这就是这个｡ 

这是我默认的VPC默认主路由表,

主路由表｡

好了, 现在我们知道我们在哪里了｡ 

好的, 我们想把这个和那个联系起来｡ 

我们先从公共路由表开始, 我将转到路由,

然后编辑路由, 这样就有了一个目的地｡

因此, 在此示例中, 我们需要选择一个CIDR,

它对应于我的VPC（创建为默认VPC）的CIRD｡

为此, 让我们进入您的VPC, 找到默认的VPC,

IP四CIRD就在这里｡

所以我复制它, 我粘贴它｡ 

我们会说, 嘿, 进入此IP地址范围的任何流量都应该发送到一个称为演示对等连接的对等连接｡

然后单击“安全更改”,

我们所做的有效工作是创建了一条从我的创意VPC到默认VPC的路径｡

因此, 如果我们再次尝试并执行curl,

仍然不工作, 原因是, 我们还需要修改其他路由表,

使其工作｡

所以我们开始吧｡ 

让我们修改另一个路由表｡ 

为此, 我将进入VPC主路由表, 编辑此路由并添加一条路由｡

这次是十块钱｡  0. 0. 0. 0. 0/16,

它现在是我们在本课程中创建的VPC的CIRD｡

同样, 对等连接｡ 

然后我们会说阶跃变化｡ 

所以现在我们有双向的路线｡ 

如果我再卷一次, 按回车键, 就可以了.

我们会得到一个你好世界｡ 

这意味着VPC对等连接正在工作并且已建立｡

好吗？

就这样了, 希望你喜欢｡ 

我们下节课再见｡
