---
source: 17 - Decoupling applications SQS, SNS, Kinesis, Active MQ\005 SQS - Long Polling_zh.srt
---

教师：那么, 让我们来讨论一下Amazon SQS长轮询｡ 

因此, 当使用者从队列请求消息时,

如果队列中没有消息,

它可以等待消息到达, 这称为长轮询｡

你这样做的原因有两个｡ 

第一, 减少延迟;第二,

减少对SQS进行的API调用的数量｡

让我们来看看它是如何工作的｡ 

我们有SQS队列, 它是空的｡ 

因此, 我们的消费者将轮询队列,

并将轮询最多20秒｡

我们这样做的原因是, 如果队列是空的,

我们就等待｡

如果队列为空, 则可以等待, 这样当消息出现时,

就像它刚刚到达消息中一样｡

如果使用者仍处于长轮询中,

则会自动将该消息发送给使用者,

该消息具有低延迟, 并且会自动尽快到达｡

因此, 这是有意义的,

长轮询将减少对SQS进行的API调用的数量,

同时提高应用程序的效率并减少延迟｡

因此, 您可以将其配置为1到20秒之间,

显然时间越长越好｡

在我看来, 你显然更喜欢长时间的投票,

而不是短时间的投票｡

因此, 请务必对其进行配置｡ 

有两种方法可以配置长轮询｡ 

您可以在队列级别配置它（例如,

从使用者执行轮询的任何使用者都将启用长轮询）,

或者使用者本身可以通过指定等待超时秒数来选择执行长轮询｡

因此, 在考试过程中, 如果您发现可以优化对SQS队列进行的API调用的数量并减少延迟,

请考虑长轮询｡

这节课就讲到这里, 希望你们喜欢｡ 

我们下节课再见｡
