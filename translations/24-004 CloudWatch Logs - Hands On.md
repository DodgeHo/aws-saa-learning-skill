---
source: 24 - AWS Monitoring & Audit CloudWatch, CloudTrail & Config\004 CloudWatch Logs - Hands On_zh.srt
---

- ：好的, 现在我在CloudWatch日志中,

我们可以看到我们现在拥有的所有日志组｡

如您所见, 我们有八个,

它们是由一些服务创建的｡

例如, 这一个是由Lambda创建的｡ 

这个是由数据同步创建的｡ 

这个日志组是通过glue创建的,

这个日志组是我们在执行SSM

runCommand时创建的, 我们希望将输出填充到这个日志组中｡

例如, 如果我们看一下这个示例,

我们有六个日志流, 每个日志流代表一个不同的实例,

我们在这些实例上运行了特定的运行命令｡

所以, 这是六个相同的运行命令ID｡ 

在这里, 我们为这六个变量中的每一个都提供了不同的实例ID,

因此, 2和2, 然后是stdout和stderr｡

如果查看stdout,

我们可以看到此命令生成的所有日志,

还可以看到所有日志行,

等等｡

所以这是相当（模糊不清）的｡ 

这个想法是,

例如, 从日志中,

你可以查看关键字http,

它会显示所有包含htp的日志行｡

例如, 如果您只查找单词“installing”,

它可能只会显示两三行包含单词“installing”的日志｡

所以这是肯定的（模糊不清）｡ 

对于stdout, 我们有stderr,

所以我们可以看到不同日志流背后的想法｡

现在, 我们可以在这里创建度量过滤器, 这些度量过滤器是我们找到过滤器模式的一种方式｡

例如, 安装｡ 

好的, 然后我们需要选择一个自定义数据,

例如, 这个日志流, 然后我们测试一个模式,

它会在简单日志的五个匹配项中给我们三个匹配项｡

现在, 如果您继续输入此筛选器名称, 如我们所见, 它可以将其命名为DemoFilter和DemometricFilter｡

这是一个新的命名空间｡ 

这是DemoMetric｡ 

这是DemoMetric过滤器命名空间, 这是DemometricFilter｡

然后是度量值｡ 

当有一个过滤器模式或匹配发生等,

你可以说一个, 例如, 添加一个,

并计数有多少次这个安装线已拍摄｡

默认值和单位（如果需要）, 然后单击“下一步”､

“创建”, 这将显示一个新的指标, 如果您在此处进入CloudWatch指标, 我们将清除此图,

然后找到一个新指标｡

让我们刷新此页面｡ 

也许这能帮到我们｡ 

好的, 如果我们进入所有的新空间,

一旦这个度量过滤器出现, 它就会出现在这里, 我们可以看到它｡

但目前, 因为我们不发送任何日志输出, 所以我们看不到它｡

但是, 我们可以在此指标筛选器之上创建警报,

因此, 我们可以单击“创建警报”｡

并且这将允许我们在例如度量超过特定值的情况下创建警报,

并且同样, 该度量是基于来自日志流的过滤器计算的｡

我们还可以创建订阅过滤器｡ 

如您所见, 我们可以为不同的结果创建一个筛选器｡

所以Elasticsearch, Kinesis, datastreams,

Kinesis Firehose或者一个Lambda订阅过滤器,

如果你想把数据发送到自定义的lambda函数中｡

根据这个, 我们可以为每个日志组创建最多两个订阅过滤器｡

现在, 我们还可以编辑保留设置｡ 

因此, 我们可以看到, 日志永远不会过期,

最长可达120个月｡

好吧, 十年｡ 

然后, 我们还可以将数据导出到Amazon S3｡ 

因此, 您可以单击“export

data”（导出数据）｡ 您可以选择要导出的数据范围,

然后选择流前缀（如果您只想获取特定的日志流）, 然后选择S3存储桶和存储桶前缀, 这样就可以开始了｡

最后, 在这里,

您可以创建一个日志组（模糊的）demo-log-group｡

好的, 您可以设置保留设置｡ 

KMS密钥（如果要加密日志组）, 然后单击“创建”｡

因此, 如果指定了KMS密钥ID, 则加密设置将显示在此处｡

最后, CloudWatch

Logs Insights允许您使用一种很好的查询语言来查询一些特定的日志组｡

例如, 我们可以创建这个并运行查询｡

然后, 这不会给我们任何数据, 因为我们要查找过去一小时的数据｡

但如果我们查看过去60天的数据并运行此查询,

也许我们会找到一些东西｡

因此, 您可以看到, 我们从该查询中找到了18条记录｡

因此, 这为我们提供了一种很好的查询语言,

可以开始在日志上获得一些见解｡

最重要的是, 如果你想的话,

你可以导出结果｡

在右侧, 您可以看到您可以保存查询｡

好吗？

所以您可以在这里查询和保存它们｡ 

或者, 您可以查看一些简单的查询,

并查看丢失日志洞察的用例, 例如, 查看Lambda上五分钟间隔的延迟统计信息, 或按VPC流日志的源IP地址和目标IP地址获取前10名传输｡

例如, 如果您点击这些,

它会为您提供一些关于查询语言如何用于CloudWatch日志洞察的很好的见解｡

这是CloudWatch日志｡ 

我希望你们喜欢它,

我们下节课再见｡
