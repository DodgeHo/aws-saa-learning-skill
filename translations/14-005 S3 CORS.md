---
source: 14 - Amazon S3 Security\005 S3 CORS_zh.srt
---

- ：现在我们来谈谈CORS｡ 

CORS是跨源资源共享｡ 

而这是你在考试时需要知道的一个问题｡

现在, 我将深入探讨它是如何工作的,

这将使回答这个问题变得非常容易｡

因此, 源是一个方案､ 一个协议､ 一个主机､

一个域和一个端口｡

例如, 如果您查看https：//www. 示例中｡  对于HTTPS, 隐含的端口是443,

协议是HTTPS本身, 域当然是www. com｡

示例中｡  现在,

CORS是一个基于Web浏览器的安全机制, 允许或拒绝访问主源时对其他源的请求｡

那么, 让我们来看看同源是什么意思｡ 

因此, 如果我们有相同的方案､ 相同的主机和相同的端口,

则它是相同的源｡

例如, 我们有这两个URL,

它们共享相同的来源｡

但是, 我们可以有不同的起源｡ 

例如, www. 示例中｡  com和其他网站｡  示例中｡  因此, 如果我们的Web浏览器正在访问一个网站,

并且作为请求方案的一部分, 应该向另一个网站发出请求, 那么这些请求将不会被满足,

除非另一个源允许使用CORS报头的请求｡

它们被称为“访问控制允许来源”标头｡ 

让我们通过一个示意图来了解它的工作原理以及如何利用它们｡

我们有一个Web服务器, 它是您的源, 它是https：//www｡

示例中｡  com和网络浏览器｡ 

第二个网络服务器, 也就是交叉源, 好吗？

所以, www. 其他｡  现在, Web浏览器将向第一个源Web服务器发出HTTPS请求｡

作为结果的一部分, HTML文件检索到的索引会说,

嘿, 你还必须得到一些图像, 例如, 从另一个Web服务器｡

因此, Web浏览器具有内置的安全性,

并且首先将向跨源进行飞行前请求｡

所以, 它会说, 嘿, 我想得到www的选项｡

其他｡  顺便说一下,

我的请求来源是https：//www｡

示例中｡  com的网站｡ 

然后, 如果考虑并配置Web服务器使用跨源资源共享,

则它会说, 是的, 我确实允许此源, 如示例所示｡

com源代码, 用于get､ put和delete方法｡ 

这就是我们所说的CORS标头｡ 

而且, 如果Web浏览器对该CORS头满意,

则Web浏览器将向其他服务器发出请求, 以检索这些文件并进行这些调用｡

那么, 它如何应用于Amazon S3呢？

如果客户端在我们的S3桶上发出跨源请求,

我们需要启用正确的CORS头｡

这是一个非常流行的考试题,

一个快速的方法是允许一个特定的原点,

或者允许 *, 这意味着所有的原点｡

那么, 让我们来看看｡ 

我们有一个Web浏览器和一个S3 bucket,

其中启用了一个静态网站｡

这就是我的桶HTML｡ 

我们将资产和图像存储在另一个称为my-buckets-assets的S3存储桶中｡

同样, 我们为它启用了一个静态网站｡ 

因此, Web浏览器转到第一个S3桶,

然后说, 嘿, 我想获取索引,

即HTML文件, 这里的URL当然是静态网站URL｡

所以, 我们拿回了索引｡  HTML和索引内｡

html中有一个图像,

并且该图像存在于另一个网站上｡

因此, 我们得到了图像/咖啡,

这是Web浏览器在做它的事情,

但这次它说, 嘿, 目标主机是这个其他网站, 但起源是这个第一个网站｡

如果S3存储桶未配置为具有正确的CORS标头,

它将拒绝该请求, 否则,

如果它允许该请求, 则它将具有正确的标头, 并说, 好的, 您可以执行该请求,

并且您可以获得映像｡

请记住, CORS是一种Web浏览器安全机制,

允许您在请求来自其他来源时从一个S3存储桶中检索图像､ 资产或文件｡

就这样了｡ 

希望大家喜欢, 我们将在下一堂课中进行一些实践,

向大家展示CORS的工作原理｡
