---
source: 06 - EC2 - Solutions Architect Associate Level\003 EC2 Placement Groups_zh.srt
---

演讲者：那么现在我们来谈谈安置小组｡ 

放置组更高级一点,

一旦我们想要控制如何将EC2实例放置在AWS基础设施中,

我们就想使用它们｡

因此可以使用这些放置组来定义策略｡

因此, 我们不会与AWS的硬件直接交互, 但我们让AWS知道我们希望如何将EC2实例与其他实例进行比较｡

因此, 当您创建一个放置组时,

您有三个可用的策略｡

您有一个集群放置组,

您的实例将在单个可用性区域内的低延迟硬件设置中分组在一起｡

这将为您带来高性能, 但也会带来高风险｡ 

我们马上会看到细节｡ 

Spread, 意味着您的实例将分布在不同的硬件上｡

这是一个限制, 这意味着每个放置组只能有七个EC2实例,

每个放置组分布在每个可用区｡

因此, 当您有关键应用程序时,

您可以使用分散放置组｡

最后, 最后一个是一种新的放置组,

它非常有用, 它被称为分区｡

它类似于spread,

意思是你想分散你的实例, 但在这里它们分散在许多不同的分区上｡

这些分区依赖于AZ内的不同硬件机架集｡

这意味着, 它们仍然是分散的,

但它们不是从另一个故障中隔离出来的,

而是一个分区应该与另一个分区隔离｡

这样做的想法是, 您可以在每个组中扩展数百个EC2实例,

并允许您运行Hadoop, Cassandra或Kafka等应用程序｡

现在让我们来详细了解一下这些安置组｡

对于集群, 这意味着我们所有的EC2实例都在同一个机架上,

这意味着相同的硬件和相同的可用性区域｡

如您所见, 所有这些实例都在同一硬件上｡

那么我们要怎么做呢？

基本上, 我们会将它们放在同一个机架上,

因为我们希望有一个集群, 我们希望有超低延迟, 并希望有一个10千兆位的速度网络｡

所以这意味着我们有一个惊人的网络, 对吧？

但是, 作为我们得到的这个伟大网络的缺点, 我们得到的缺点是,

如果机架出现故障, 如果硬件出现故障, 那么所有的EC2实例将同时出现故障｡

因此, 我们增加了失败的风险,

这种失败将在整个堆栈中传播｡

我们什么时候用这个？

增加风险对你有什么好处｡ 

我们有很好的网络｡ 

因此, 这意味着我们可以有一个需要非常快完成的大数据工作｡

或者, 我们需要一个应用程序,

需要极低的延迟和高网络吞吐量, 我们愿意承担这种失败的风险｡

所以你必须意识到这一点,

它并不适合每一种应用程序,

但如果你的应用程序需要超高带宽和低延迟,

放置组是一种很好的方法, 集群放置组是一种很好的方法｡

现在, 传播是完全相反的｡ 

在传播中, 我们希望将失败风险降至最低｡ 

因此, 在本例中,

当我们请求分散放置组时,

所有EC2实例都将位于不同的硬件上｡

正如您在这里看到的,

我们有三个AZ, 六个EC2, 每个EC2实例都在不同的硬件上｡

这是什么意思呢？

我们得到的是, 我们可以跨越多个AZ,

同时发生故障的风险降低｡

为什么？ 因为如果我的硬件一失败了,

我很确定我的硬件二不会失败｡

所以我们已经分离了我在Us-east-1a中的两个实例同时失败的风险｡

这就是它的好处｡ 

缺点是, 从这个配置中, 我们限制每个AZ､

每个放置组只能有七个实例｡

因此, 你的安置小组的规模是有限的｡ 

所以你需要有一个大小合适的应用程序,

但不能太大｡

用例是需要最大化高可用性并降低风险的应用程序｡

一般来说, 对于实例故障必须彼此隔离的关键应用程序｡

请记住, 每个放置组的每个AZ限制为七个实例｡

现在对于分区放置组,

我们可以让实例分布在多个可用性区域的分区上｡

因此, 每个AZ最多可以有七个分区｡ 

因此, 在这个例子中,

我们在us-east-1a中有分区1和分区2,

在us-east-1b中有分区3｡

在每个分区上, 您可以有许多EC2实例｡ 

所以在第一个中, 我有四个,

第二个我有四个,

第三个我也有四个｡

那么为什么要使用分区放置组呢？

每个分区代表AWS中的一个机架｡ 

因此, 通过拥有许多分区,

您可以确保您的实例分布在许多硬件机架上, 因此,

它们可以安全地避免机架故障｡

因此, 每个可用区最多可以有七个分区,

并且这些分区可以跨越同一区域中的多个可用区｡

您可以通过设置获得多达数百个EC2实例｡ 

这就是与分散型布局组的区别｡

正如我所说, 实例和分区不与其他分区中的实例共享同一个硬件物理机架,

因此, 每个分区都是隔离的｡

所以这意味着, 如果一个分区失效,

如果分区失效, 分区号2, 那么分区号1应该没问题｡

要知道这些EC2实例在哪个分区上,

可以使用元数据服务访问此信息｡

那么什么时候使用分区放置组呢？

好吧, 当你有一个应用程序,

它可以分区意识到跨分区分布数据和服务器｡

通常, 用例将是大数据应用程序,

这些应用程序是分区感知的, 例如使用HDFS,

Hbase, Cassandra和Apache Kafka｡
