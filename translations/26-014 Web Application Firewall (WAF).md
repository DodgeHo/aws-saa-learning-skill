---
source: 26 - AWS Security & Encryption KMS, SSM Parameter Store, Shield, WAF\014 Web Application Firewall (WAF)_zh.srt
---

讲师：现在, 我们来讨论AWS WAF,

即Web应用程序防火墙｡

它用于保护您的Web应用程序免受第7层的常见Web漏洞攻击｡

提醒一下, 第7层是HTTP, 因此它可以保护您免受HTTP攻击｡

而作为比较, 第4层用于TCP或UDP协议｡ 

因此, 此WAF､ 此Web应用程序防火墙可部署在应用程序平衡器和API网关､

CloudFront､ AppSync GraphQL API或Cognito用户池上｡

所以请记住, 这一点非常重要｡ 

您记住了WAF的目标,

因为考试会试图欺骗您,

例如, 让您在NLB上部署WAF, 但这是不可能的｡

因此, 一旦您在这些服务上部署了防火墙, 您就可以定义Web

ACL, 它们是Web访问控制列表及其规则｡

因此, 您可以设置规则, 例如,

根据IP地址进行过滤｡

这样就可以定义一个IP集｡ 

每个IP集最多可包含10, 000个IP地址｡ 

如果您需要更多的IP地址, 则可以对更多的IP使用多个规则｡

您也可以根据HTTP信头､ 主体进行筛选｡ 

您可以使用URI字符串来防止最常见的攻击,

例如SQL注入和跨站点脚本｡

您可以设定大小限制, 以确保请求最多只能达到2

MB, 或者进行地理匹配, 以允许或阻止特定的国家,地区｡

您甚至可以使用基于速率的规则来统计每个IP的请求发生次数,

以实现DDoS保护, 例如, 防止特定IP每秒发送10个以上的请求｡

因此, 这些Web ACL是区域性的, 但CloudFront除外,

它们是全局定义的｡

如果您看到术语“规则组", 那么它是一个集合,

是一组合理的规则, 您可以将其添加到许多Web

ACL中｡

所以这只是为了组织他们｡ 

因此, WAF有一个非常好的使用案例｡ 

那么, 如果您希望在将WAF与应用程序负载平衡器配合使用的同时获得应用程序的固定IP,

该怎么办？

因此, WAF不支持网络负载平衡器,

因为NLB在第4层上运行, 而WAF用于第7层｡

因此, 要提供WAF, 您需要有一个应用程序负载平衡器｡

但是我们知道应用平衡器没有固定的IP｡

因此, 为了解决问题, 我们可以使用全局加速器来获取应用程序的固定IP,

然后在ALB上启用WAF｡

架构是这样的｡ 

我们有一个包含ALB和EC2实例的区域｡ 

我们将使用全局加速器来处理ALB, 以便为我们的应用程序获取固定IP｡

我们将在应用程序低平衡器所在的同一区域上附加一个带有WebACL的Web应用程序防火墙｡

因此, 我们已经实现了目标架构｡ 

这节课就讲到这里｡ 

希望你喜欢｡ 

我们下节课再见｡
