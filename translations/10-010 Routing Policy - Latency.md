---
source: 10 - Route 53\010 Routing Policy - Latency_zh.srt
---

教师：我们来讨论一种非常容易理解的路由策略,

即基于延迟的路由策略｡

好吧, 我会的

现在, 我们来讨论一下基于延迟的路由策略｡ 

我们的想法是, 您希望重定向延迟最低的资源｡

因此, 最接近我们,

这是超级有用的, 当延迟是你的网站或应用程序的主要关注点｡

现在, 延迟将根据用户连接到最近的､

已确定的AWS区域以获取该记录的速度进行测量｡

例如, 如果用户在德国,

而您在美国的资源具有最低的延迟, 那么这就是您将被重定向到的位置｡

这可以和健康检查结合起来, 我们会在下一节课看到.

那么让我们看一下世界地图来了解它｡

假设我们在世界的两个不同地方部署应用程序,

一个在美国东部1, 另一个在亚太东南部1｡

然后, 用户遍布世界各地,

延迟将由Route 53进行评估｡

因此, 距离ALB最近且延迟最低的用户us-east-1将被重定向到ALB｡

而其他用户将被重定向到ap-southern-1｡

现在, 让我们在控制台中将其付诸实践｡ 

所以让我们创建新记录｡ 

记录的名称将是“延迟”｡

斯蒂芬老师｡  com的网站｡ 

第一个值将是ap-southern-1中的值｡

所以我可以把值粘贴到这里｡ 

然后, 路由策略将是“延迟”｡ 

因此, 当我们执行此操作时,

因为我们只是在此处输入了一个IP地址,

所以我们需要指定记录的区域｡

所以这一个将对应于ap-seouthern-1,

它在新加坡｡

好吧, 我会的

原因是Alias不够智能,

至少在这个阶段, 无法获取此IP并知道它来自我在新加坡的EC2实例,

因为这实际上可能是世界上的任何IP｡

因此, 我们需要指定该IP对应的地区,

即亚太地区､ 新加坡｡

然后, 我们可以关联运行状况检查和记录ID｡ 

所以我把这个叫做ap-southern-1

这只是我给它起的名字｡ 

现在, 我们可以添加另一条记录｡ 

同样, 记录名称将为“Latency”,

此名称的值将为us-east-1｡

这里有一个值,

它将被加权.

否, 延迟｡  不好意思, 当然｡ 

然后是美东一号｡ 

同样, 我将它作为一个us-east-1为我的记录ID｡

最后一条记录是欧洲中央一号｡ 

所以我就复制了这个IP｡ 

记录名称是this, 值是here,

路由策略是Latency, 区域是eu-central-1,

名称也是如此｡

好吧, 我会的

如我们所见, 我们有三个记录正在创建,

已成功创建, 这就是它｡

现在让我们来尝试一下｡ 

所以现在我在欧洲｡ 

所以如果我打开这个,

我希望它会转到我在欧洲的实例｡

我转到这个URL, 从eu-central-1c的这个IP得到一个响应,

Hello World｡

如果我使用CloudShell来测试它,

我们在上面执行一个dig命令｡

正如我们所看到的, 我们得到的错误代码只有一个值｡ 

好吧, 我会的

因此, 只有一个值的IP地址与此相同｡ 

这是我在eu-central-1c中的实例｡ 

如果我继续刷新,

因为我的延迟没有变成中央1,

我会得到, 总是相同的答案｡

好吧, 我会的

但是, 我们如何测试延迟记录是否有效呢？

好吧, 我可以用VPN｡ 

比如说加拿大｡ 

在加拿大, 我的潜伏期最接近美国｡

S的｡ 

因此, 如果我现在刷新这个页面,

我会从U. S的｡ 

当我确实改变了我的位置, 由于VPN, 它清除了我的DNS缓存的所有TTL,

在我的笔记本电脑本地｡

这就是为什么通过自动刷新它,

我能够得到us-east-1a的最新值｡

但是, 如果我使用dig, 因为它没有改变, 好吧, 我的CloudShell仍然在欧洲,

好吧｡

如果我使用dig命令,

并使用与这里完全相同的命令, 我仍然会得到与前面完全相同的值,

好吧, 因为, 这台计算机就在这里, 这台CloudShell位于eu-central-1｡

所以这仍然是最接近欧盟中央一号的位置｡

我们怎么测试AP东南部的那个？

我们去香港吧｡ 

好吧, 我会的 所以我现在离新加坡很近了｡ 

我会刷新这个｡ 

答案是, 你好, 世界, 从ap-东南-1b｡ 

因此, 延迟记录是有效的,

它们真的非常好,

在网上非常常用｡

我希望你们喜欢,

下节课再见｡
