---
source: 05 - EC2 Fundamentals\003 Create an EC2 Instance with EC2 User Data to have a Website Hands On_zh.srt
---

演讲者：欢迎｡ 

因此, 在本讲座中, 我们将启动第一个运行Amazon

Linux的EC2实例｡

为此, 我们将启动我们的第一个EC2实例,

它是一个可视化服务器, 我们将使用控制台｡

我们将从高层次上了解启动EC2实例时的所有各种参数,

您将看到有很多参数,

但我们将学习最重要的参数｡

然后, 我们将使用一段代码直接在EC2实例上启动Web服务器,

这段代码将传递给EC2实例, 称为用户数据｡

最后, 我们将学习如何启动､

停止和终止实例｡

现在让我们开始启动第一个EC2实例｡ 

为此, 我将进入EC2控制台,

然后我将单击“启动”, 然后单击“启动”｡

在这里, 我可以启动我的第一个EC2实例,

为此, 我需要添加一个名称和标记｡

所以名称将是我的第一个实例,

这是一个应用程序, 是名称标签｡

如果你想添加额外的标签来以不同的方式标记你的实例,

那么你可以点击那里, 但你不需要点击这个,

只使用名称作为我的第一个实例就足够了｡

接下来, 您需要为您的EC2实例选择一个基础映像｡ 

这是实例的操作系统｡ 

正如你所看到的, 有一个完整的目录, 你可以从中搜索,

但我们将使用那些从快速开始, 是非常,

非常有帮助的｡

我们将使用的是Amazon Linux,

它由AWS提供｡

所以我会选择Amazon Linux 2 AMI｡ 

正如你所看到的, 一个是免费的等级资格｡ 

所以我们就这样吧｡ 

所以这给了我Amazon

Linux 2, 我将选择的架构是64位x86｡

所以所有的东西都是默认的, 我们会在这一节看到,

还有其他的, 你可以创建你自己的AMI,

你可以在这里找到它们, 好吗？

但目前我们只打算使用AWS提供的服务作为快速入门｡

接下来, 我们需要选择一个实例类型｡ 

因此, 实例类型将根据它们拥有的CPU数量､

内存量和成本而有所不同｡

正如你现在看到的, 我有一个T2｡  微选择

这是一个免费的层资格, 所以它将是免费推出其中一个在整个月,

如果我们离开它运行｡

这就是我们要用的｡ 

但在这里, 您可以向下滚动并查看其他类型的实例｡

例如, t1｡  micro也符合免费层的条件,

但那是老一代的｡

正如你所看到的, 你有很多实例可以使用｡

他们中的一些人将是免费的等级资格,

其中一些人不会｡

默认情况下, 符合免费等级条件的是t2｡

micro.

所以我们会经常用到这个｡ 

如果你想比较实例类型,

你只需点击这个链接,

它就会显示所有的实例类型, 以及它们有多少内存等等｡

现在我们用的是T2｡  micro.

好的, 接下来, 一个密钥对登录到您的实例｡ 

因此, 如果我们使用SSH实用程序访问实例, 这是必要的,

我们将在本课程中使用SSH实用程序｡

因此, 我们需要创建密钥对｡ 

正如我们现在看到的, 没有密钥对,

我们可以在没有密钥对的情况下继续, 但现在我们不会这样做｡

因此, 让我们继续创建一个新的密钥对,

名称将是EC2｡

然后, 您需要选择密钥对类型｡ 

所以我们将使用RSA加密, 好的, 这很好｡ 

然后是密钥对格式｡ 

因此, 如果你有Mac或Linux或Windows

10, 那么你可以使用｡ pem格式｡ 

如果您的Windows版本低于10,

例如Windows 7或Windows

8, 那么您可以使用我们的快捷方式并直接使用ppk,

这将用于PuTTY, PuTTY是您在Windows 7和Windows

8上进行SSH的方式｡

所以记住除了Windows 7和Windows

8之外的任何东西, 选择｡ ppm否则使用ppk｡ 

好的, 我应该说得很清楚,

我要创建这个密钥对, 它是直接为我下载的｡

所以现在它在这里被自动选中｡ 

接下来, 我们必须进入网络设置｡ 

所以现在, 我不会碰任何东西｡ 

我的实例将获得一个公共IP, 然后我们需要连接到我们的实例｡

因此, 将有一个安全组连接到我们的实例,

它将控制来自和到达我们实例的流量,

因此我们可以添加规则｡

创建的第一个安全组将被称为launch-wizard-1｡

因此, 由控制台直接创建,

我们可以定义多个规则｡

因此, 我们想要的第一条规则是允许来自任何地方的SSH流量｡

因此, 我们将其保留为这样, 这将在我们的安全组中创建一个规则,

以允许SSH流量, 但我们也希望允许来自Internet的HTTP流量｡

所以我们将勾选该框, 这是因为我们要在EC2实例上启动一个Web服务器,

所以我们也需要它｡

因为我们现在要使用HTTPS,

所以我们不需要勾选第二个框｡

让我们先配置存储,

然后再配置存储｡

正如我们所看到的, 我们有8GB的gp2根卷, 它将保持原样,

好吗？

因为在免费层中, 我们可以获得高达30

GB的EBS通用SSD存储｡

所以这很好｡  我们只需要一卷｡ 

如果你进入高级, 你可以配置它们,

看到更多的信息, 好吗？

这里要注意的一件重要的事情是在终止时删除｡

默认情况下, 它是不能是的, 我只是做了先进的,

以显示您的一个细节, 好吗？

这意味着一旦我们终止EC2实例, 那么该卷也将被删除｡

好的, 我们保持原样,

回到简单模式｡

好了吗？

接下来, 对于高级细节,

这就是它变得有趣的地方｡

所以我将跳过spot, 跳过IAM实例配置文件｡ 

别担心, 一旦我们需要探索它们,

我会检查它们｡

我会跳过这一切｡  我们往下看｡ 

让我们向下滚动, 让我们一直向下滚动到底部｡

最底层是用户数据｡ 

用户数据是当我们传递一个脚本｡ 

因此, EC2实例的一些注释将在EC2实例的第一次启动时执行,

并且仅在第一次启动时执行｡

因此, 在第一次发射时, 我们希望能够在这里传递这些命令｡

因此, 你进入你的代码,

你进入EC2基础,

然后EC2用户数据集文件, 你完全复制它,

所有的｡

然后你把它贴在这里｡  所以你把所有东西都贴上了｡ 

这意味着这个脚本将在实例第一次启动时执行,

并且只执行一次？

在实例的整个生命周期中｡ 

它要做的是更新一些东西,

然后在机器上安装HTTPD Web服务器, 然后写一个文件,

一个HTML文件｡

这将是我们的Web服务器｡ 

所以你不需要知道代码或这些命令｡ 

好了吗？

提供给你们的是为了说明这堂课的一些内容｡

最后总结一下, 我们要启动一个实例｡ 

这是伟大的, 我们可以回顾我们在这里的一切｡ 

看起来都不错 我们很幸福｡ 

正如你所看到的, 在免费层, 我们得到了第一年的750小时的2｡

micro, 运行了一个月｡ 

所以是每个月｡ 

如果你没有t｡  如果你所在的地区是2微米,

那么它将是一个T3｡ 微, 好吗？

然后我们还得到了30千兆字节的EBS存储等等｡ 

让我们启动这个实例, 这个实例将被启动｡

让我们去查看所有照片, 刷新｡ 

现在我的案子处于未决状态

所以启动这个实例需要10到15秒｡

这就是云的全部力量｡ 

多亏了云计算, 我可以在不到10秒的时间内快速创建一个或100个实例,

而无需拥有任何一台服务器｡

所以这是非常强大的,

我们只是触及了云计算能力的表面,

显然是因为这门课程才刚刚开始,

但是你可以感受到我们在云计算上的进步和速度｡

正如你所看到的, 我的实例正在运行,

现在我想向你展示一些东西, 好吗？

第一个是实例名为MyFirstInstance,

有一个实例ID, 它只是我的实例的唯一标识符｡

公共IPv4地址｡ 

这就是我们要用来访问EC2实例的东西｡ 

或者有一个私有IPv4地址,

这是如何在AWS网络上内部访问该实例的,

这是私有的｡

实例站点正在运行, 我们可以获得有关主机名､

私有DNS以及我们拥有的实例的一些信息｡

所以是T2｡  micro以及如果你向下滚动我们使用的AMI,

也就是Amazon Linux 2, 以及我们使用的密钥对,

也就是EC2教程, 好吗？

所以你可以在这里看到一些细节｡ 

你有更多的信息｡ 

例如, 在安全性方面, 我们获得了一些关于安全组的信息,

该安全组是使用这些入站规则创建的,

名为launch-wizard-1｡

所以端口22可以从任何地方访问, 端口80可以从任何地方访问｡

所以你应该有类似的东西, 好吗？

如果你不重新开始, 因为你可能错过了一步｡ 

以及允许所有向外通信的规则,

这允许实例访问Internet｡

对于存储, 我们看到, 是的, 我们创建了一个8GB的卷,

所以我们可以开始了｡

现在让我们来看看运行在我的实例上的Web服务器｡

对于这个, 你去公共IPv4地址, 你复制这个或你点击打开地址｡

正如你所看到的, 它不起作用｡ 

或者如果你点击它,

复制然后粘贴它, 你按回车键, 它会工作｡

所以这取决于你的网络浏览器等等｡  好了吗？

但它在这里不起作用的原因是,

在URL中, 你需要确保你使用的是HTTP协议, 所以http：//然后是IP｡

因为如果你使用HTTPS, 这是行不通的｡ 

它会给你一个无限加载屏幕,

就在这里发生｡

因此, 请确保使用http：//, 然后IP地址｡ 

你将得到这个屏幕｡ 

在编程中, 当你第一次做某件事时,

你通常会说Hello World｡

所以这个Web服务器说,

Hello World从这里的这个IP,

这不是公共IP, 这里的这个IP,

172-31-33-135实际上对应于私有IPv4地址｡

这是我自己编写的程序｡ 

所以我们使用公共IP地址来访问它, 但是我们在这里有私有IP地址,

我们有Hello World｡

如果你走得太快, 你就收不到信息了｡ 

所以如果你走得太快, 只要等五分钟, 回到它,

刷新这个页面, 你就会看到它｡

好吧, 太酷了, 我们有一个网络服务器运行, 这是伟大的｡ 

现在让我们探索几个选项｡ 

因此, 我们有一个EC2实例, 它正在运行,

但如果我们不需要它, 我们可以转到实例状态, 然后单击Stop

Instance｡

在云中, 你可以随心所欲地启动和停止实例｡

你为什么要阻止一个实例？

开得越久, 当然要付的钱就越多｡

但是, 如果您决定停止实例,

那么AWS将不会为此向您收费｡

保持实例状态是因为您有一个卷附加到它,

但至少您没有为此付费｡

我们现在可以看到, 实例处于停止状态,

如果我们试图刷新这个页面,

它当然不会工作,

因为你不再运行服务器了｡

所以你可以看到它得到了一些像无限加载的体验｡

好了吗？

所以我的实例现在被停止了, 如果我想的话,

我可以删除它｡

在云中, 启动实例然后删除它们是非常常见的｡

我们很快就开始尝试, 因为这是云计算,

我们可以做任何我们想做的事情｡

所以我们可以在实例状态下执行, 然后终止实例｡ 

如果我们这样做, 我们会得到一个警告消息, 不要点击Terminate,

因为我想保留这个实例, 好吗？

但这是我们摆脱它的方法｡ 

所以我取消了这个, 但是我现在要做的是, 我将再次启动我的实例｡

所以我转到实例状态, 然后启动实例｡ 

现在你可以看到, 状态是挂起的, 所以它正在启动,

我只是等待它在绿色状态下启动, 我会向你展示一些非常有趣的东西｡

好的, 我的实例现在正在运行, 如果我在这里停止刷新,

然后再次尝试刷新, 正如你所看到的,

它仍然会进入一个无限循环｡

斯特凡, 你可以在服务器运行时说.

为什么现在不显示消息了？

它在这里展示,

但就像旧的一样, 当然｡

所以这里的IP是从54开始的, 对吗？

但是在这里, 如果你点击这里, 现在公共IP从3开始｡

250.

其实IP地址已经改变了｡ 

因此, 如果您停止一个实例, 然后稍后再启动它,

那么AWS可能会更改其公共IPv4｡

因此, 您需要复制新的IPv4,

确保使用HTP｡

瞧, 我们可以访问我们的EC2实例了｡ 

但有一件事没有改变, 那就是私有IPv4,

私有IP将永远保持不变, 但公有IPv4可能会改变｡

好了吗？ 好了, 这就是我们的实践｡ 

我们已经看到了很多东西｡ 

我们已经启动了第一个EC2实例,

这非常令人兴奋｡

我们的第一台云端Web服务器｡ 

我们不得不看看云的一些力量｡ 

您只是使用一些API调用来停止实例､

启动实例等等｡

我希望你们会喜欢, 下次课再见.
