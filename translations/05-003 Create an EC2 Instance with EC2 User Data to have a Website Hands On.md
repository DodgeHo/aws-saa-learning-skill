---
source: 05 - EC2 Fundamentals\003 Create an EC2 Instance with EC2 User Data to have a Website Hands On_zh.srt
---

# 实操：创建 EC2 实例并用 User Data 部署网站

## 学习目标
- 用控制台启动第一台 EC2 实例
- 配置关键参数：AMI、实例类型、密钥对、安全组
- 通过 User Data 自动安装 Web 服务器

## 重点速览
- 选择 Amazon Linux 2 + `t2.micro`（免费层）
- 安全组必须开放 SSH(22) 与 HTTP(80)
- User Data 只在首次启动时执行

## 操作步骤
1. 进入 EC2 控制台，点击“启动实例”。
2. **名称与标签**：命名为 `MyFirstInstance`（可选更多标签）。
3. **AMI**：选择 Amazon Linux 2（Free Tier eligible）。
4. **实例类型**：选择 `t2.micro`（或区域内的 `t3.micro`）。
5. **密钥对**：创建新密钥对 `EC2Tutorial`。
	- Mac/Linux/Windows 10：`.pem`
	- Windows 7/8：`.ppk`
6. **网络与安全组**：
	- 允许 SSH(22) 从你的 IP 或 0.0.0.0/0（练习用）。
	- 允许 HTTP(80) 从 0.0.0.0/0。
7. **存储**：保留默认 8 GiB gp2（免费层内）。确保“终止时删除”启用。
8. **高级细节 → User Data**：粘贴课程提供的脚本（安装 httpd 并写入 HTML）。
9. 启动实例并等待状态变为 **running**。

## 验证
- 在实例详情中找到 **Public IPv4**。
- 在浏览器使用 `http://<public-ip>` 访问页面（注意不是 https）。

## 管理实例
- **Stop**：停止实例（会更换公共 IP）。
- **Start**：再次启动。
- **Terminate**：彻底删除实例与卷。

## 自测问题
- 为什么访问时必须用 `http://` 而不是 `https://`？
- 如果 Stop/Start 实例，公共 IP 会发生什么变化？

你将得到这个屏幕｡ 

在编程中, 当你第一次做某件事时,

你通常会说Hello World｡

所以这个Web服务器说,

Hello World从这里的这个IP,

这不是公共IP, 这里的这个IP,

172-31-33-135实际上对应于私有IPv4地址｡

这是我自己编写的程序｡ 

所以我们使用公共IP地址来访问它, 但是我们在这里有私有IP地址,

我们有Hello World｡

如果你走得太快, 你就收不到信息了｡ 

所以如果你走得太快, 只要等五分钟, 回到它,

刷新这个页面, 你就会看到它｡

好吧, 太酷了, 我们有一个网络服务器运行, 这是伟大的｡ 

现在让我们探索几个选项｡ 

因此, 我们有一个EC2实例, 它正在运行,

但如果我们不需要它, 我们可以转到实例状态, 然后单击Stop

Instance｡

在云中, 你可以随心所欲地启动和停止实例｡

你为什么要阻止一个实例？

开得越久, 当然要付的钱就越多｡

但是, 如果您决定停止实例,

那么AWS将不会为此向您收费｡

保持实例状态是因为您有一个卷附加到它,

但至少您没有为此付费｡

我们现在可以看到, 实例处于停止状态,

如果我们试图刷新这个页面,

它当然不会工作,

因为你不再运行服务器了｡

所以你可以看到它得到了一些像无限加载的体验｡

好了吗？

所以我的实例现在被停止了, 如果我想的话,

我可以删除它｡

在云中, 启动实例然后删除它们是非常常见的｡

我们很快就开始尝试, 因为这是云计算,

我们可以做任何我们想做的事情｡

所以我们可以在实例状态下执行, 然后终止实例｡ 

如果我们这样做, 我们会得到一个警告消息, 不要点击Terminate,

因为我想保留这个实例, 好吗？

但这是我们摆脱它的方法｡ 

所以我取消了这个, 但是我现在要做的是, 我将再次启动我的实例｡

所以我转到实例状态, 然后启动实例｡ 

现在你可以看到, 状态是挂起的, 所以它正在启动,

我只是等待它在绿色状态下启动, 我会向你展示一些非常有趣的东西｡

好的, 我的实例现在正在运行, 如果我在这里停止刷新,

然后再次尝试刷新, 正如你所看到的,

它仍然会进入一个无限循环｡

斯特凡, 你可以在服务器运行时说.

为什么现在不显示消息了？

它在这里展示,

但就像旧的一样, 当然｡

所以这里的IP是从54开始的, 对吗？

但是在这里, 如果你点击这里, 现在公共IP从3开始｡

250.

其实IP地址已经改变了｡ 

因此, 如果您停止一个实例, 然后稍后再启动它,

那么AWS可能会更改其公共IPv4｡

因此, 您需要复制新的IPv4,

确保使用HTP｡

瞧, 我们可以访问我们的EC2实例了｡ 

但有一件事没有改变, 那就是私有IPv4,

私有IP将永远保持不变, 但公有IPv4可能会改变｡

好了吗？ 好了, 这就是我们的实践｡ 

我们已经看到了很多东西｡ 

我们已经启动了第一个EC2实例,

这非常令人兴奋｡

我们的第一台云端Web服务器｡ 

我们不得不看看云的一些力量｡ 

您只是使用一些API调用来停止实例､

启动实例等等｡

我希望你们会喜欢, 下次课再见.
