---
source: 18 - Containers on AWS ECS, Fargate, ECR & EKS\006 Amazon ECS - Auto Scaling_zh.srt
---

讲师：现在我们来谈谈ECS服务自动缩放｡

因此, 正如我们所看到的, 我们可以手动增加服务中ECS任务的数量｡

但我们也可以自动增加或减少任务的数量｡

为此, 我们可以利用名为AWS应用程序自动缩放的服务｡

我们有三个指标, 我们可以衡量使用该服务｡ 

我们可以根据ECS服务的CPU利用率进行缩放｡ 

我们可以根据内存利用率（即ECS服务的RAM）进行缩放｡

或者, 每个目标的ALB请求计数, 这是来自ALB的度量｡

所以你只需要记住这些指标｡ 

然后, 您可以设置不同类型的自动缩放｡ 

您可以设定“目的追踪”,

以追踪上述三个测量结果的特定目的｡

或步进缩放｡ 

或者, 如果您希望根据可预测的变化提前扩展ECS服务,

则可以选择计划扩展｡

请记住, 如果您处于EC2启动类型,

则在任务级别扩展您的服务（ECS服务）并不等于扩展EC2实例集群｡

因此, 这就是为什么当你没有必要的EC2自动伸缩时,

当你在后端没有EC2实例时, 使用Fargate可以使服务自动伸缩更容易设置, 因为一切都是无服务器的｡

所以我才喜欢法盖特｡ 

考试促使你经常使用Fargate｡ 

那么, 对于EC2启动类型,

如果我们正在使用它, 我们如何在后端实际扩展EC2实例呢？

所以我们有多种方法｡ 

我们可以使用自动缩放组缩放｡ 

因此, 我们根据CPU利用率等因素来扩展ASG｡

然后, 我们可以随着时间的推移添加EC2实例,

如果CPU激增｡

或者, 我们可以使用称为ECS Cluster Capacity

Provider的更新､ 更高级的功能, 我们在之前的实践中已经看到过该功能｡

对于这一点, 容量提供商非常聪明｡ 

一旦您缺乏启动新任务的能力,

它就会自动扩展您的ASG｡

因此, 容量提供商与自动扩展组配对｡

如果缺少RAM或CPU,

则会创建EC2实例｡

所以第二个选择是更聪明的做事方式｡ 

因此, 如果您必须在自动扩展组扩展和ECS群集容量提供程序之间进行选择,

请将ECS群集容量提供程序用于您的EC2发布类型｡

那么, 让我们来看看服务｡ 

因此, 我们有一个服务A, 它有两个任务｡ 

还有CPU使用率｡ 

它将由AWS应用程序自动缩放功能自动缩放｡

但是, 假设我们拥有更多用户,

因此您的CPU使用率确实上升,

那么再次在ECS服务级别监控CPU使用率的CloudWatch指标将触发CloudWatch警报,

这将在ECS服务的自动扩展中触发扩展活动｡

您的ECS服务所需的容量将增加,

并将创建一个新任务｡

此外, 如果此服务在EC2启动类型上运行,

则ECS容量提供程序可以帮助您扩展由EC2实例支持的ECS集群｡
