---
source: 10 - Route 53\006 Route 53 - TTL_zh.srt
---

教师：好的, 让我们来看看TTL｡ 

因此, 记录TTL是一个生存时间｡ 

让我们以客户端访问我们的DNS路由53和Web服务器为例｡

因此, 我们为myapp发出DNS请求｡  示例中｡  我们从DNS得到了一个答案,

它说, 嘿, 拜托, 这是一个A记录｡

这是IP, 还有TTL,

可能是300秒的TTL｡

因此TTL会说, 嘿, 客户端, 请在TTL期间缓存此结果｡

因此, 在300秒内,

客户端将缓存结果｡

这意味着, 如果客户端再次请求或访问相同的主机名,

将会发生的情况是客户端不会向DNS系统发出查询,

因为它已经知道答案, 因为答案已被缓存, 并且我们仍在缓存期内, 因此缓存TTL｡

这背后的想法是,

我们不想太频繁地查询DNS, 因为我们不希望记录发生太大变化,

因此, 使用它的响应, 客户端可以访问我们的Web服务器, 并执行HTTP请求和响应｡

所以我们有两个极端的例子｡ 

例如, 如果您将TTL设置为24小时, 则Route

53上的通信量将大大减少, 因为执行请求的客户端更少,

因为结果将缓存24小时, 而且客户端可能会有过期的记录｡

如果您想以某种方式更改记录,

则需要等待24小时,

以确保所有客户端的缓存中都有新记录｡

如果您说设置一个较低的TTL,

例如60秒, 则相反, 它将在您的DNS上处理更多的流量, 因此您将花费更多的美元,

因为您将按到达Route 53的请求数量计算价格｡

但是记录的过期时间会更短,

因此您可以更快地更改记录, 并且更容易更改整个记录｡

因此, 究竟什么是好TTL还是低TTL,

完全取决于您自己｡

如果您计划更改一条记录,

其想法是, 有时您会降低TTL,

比如说降低24小时, 然后当您知道所有客户端都有一个较低的新TTL时,

您可以更改记录值, 该值将为每个客户端更新, 然后您可以增加TTL｡

这是一种策略｡ 

所以TTL对于每个记录都是强制性的,

除了别名记录, 我们将在下节课中看到｡

让我们看看TTL在控制台中是如何工作的｡ 

现在, 让我们来了解一下“生存时间”的工作原理｡ 

我们来创建一条新记录,

将其命名为demo｡

斯蒂芬老师｡  它的值将是我们已知的EC2实例之一｡

那我们就选欧中一号吧｡ 

我将使用这个EC2实例并粘贴它的值｡

然后, 对于TTL, 我们将设置为两分钟｡ 

为此, 我将双击“分钟”按钮｡ 

因此, TTL现在是120秒｡ 

所以让我来创造这张唱片｡ 

现在我的记录已经被创造出来了｡ 

因此, 它是指向演示中特定IP的A记录｡

斯蒂芬老师｡  com的网站｡ 

现在, 我想告诉你, 记录是工作的,

但Firefox不是很好与我｡

所以如果我在Firefox中打开它就会出现问题｡

所以这不是我能轻易解决的问题, 所以我会用右边的Google

Chrome来给你们看｡

所以如果我做演示｡  斯蒂芬老师｡  然后它会自动把我引导到我的eu-central-1实例｡

所以这意味着这个记录, 这个A记录,

是完全正常的｡

我也可以确保这一点, 例如,

如果我使用CloudShell｡

如果我清除这个并在demo上执行nslookup｡

斯蒂芬老师｡  如您所见,

地址正确｡

如果我对它执行一个挖掘命令, 我们就能得到答案｡ 

我们在这里展示了一个很酷的数字,

答案部分是115｡

所以这里的想法, 这是因为我做了一个DNS查询｡ 

然后, 记录将缓存120秒｡ 

如果我在这里重新输入这个dig命令, 你可以看到数字降到了98｡

这就意味着在98秒内, 实际上,

我会得到相同的响应, 因为, 无论如何, 这都是缓存在我计算机上的内容｡

如果我的速度很快,

我会转到此处的记录并对其进行编辑, 因此, 我不想使用此IP,

而是要转到ap-setheast-1, 因此我们将使用列表中的第一个IP并保存此IP｡

因此, 即使该记录被更新, 如果我进入CloudShell,

再次执行此dig命令, 如您所见, 插入仍然与之前相同｡

这是因为还有66秒的时间会被缓存｡

如果我进入Chrome, 我想我已经足够快了, 我进入Chrome并刷新这个页面,

正如你所看到的, 我仍然有来自eu-central-1的答案｡

这是因为,

我的记录被缓存了两分钟｡

因此, 当缓存到期时, 只有在那时我的命令行界面或Chrome

Web浏览器才会再次向53号公路询问此记录的值｡

然后, 我会再次得到答案,

并将被重定向到这个新的IP｡

所以最好的检查方法就是等待｡ 

所以我再等一分钟,

然后再打给你｡

好的, 现在已经过了一分钟,

如果我刷新我的Web浏览器, 正如你现在看到的,

我会看到一个不同的Hello World,

这次它来自ap-seouthast-1b｡

如果我进入CloudShell并执行相同的dig命令,

那么, 如您所见, 会有一个新的TTL, 也就是120秒,

这里会有一个新的IP, 即IPO菜单服务器｡

这是一个很酷的TTL演示｡ 

我希望你们喜欢, 下节课再见｡
