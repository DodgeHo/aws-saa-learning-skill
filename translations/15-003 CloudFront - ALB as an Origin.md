## 学习目标

- 理解如何将 Application Load Balancer (ALB) 或 EC2 作为 CloudFront 的原点并考虑安全性。
- 能说明当原点为 ALB/EC2 时需要开放哪些网络访问与安全组设置以确保边缘位置能访问原点。

## 重点速览

- CloudFront 可将任意 HTTP 后端（包括 ALB、EC2）作为原点；若原点为公有 ALB，则边缘位置可直接访问。
- 若原点为 EC2 实例且在 VPC 内，需确保实例或负载均衡器对 CloudFront 边缘位置可达（通常通过允许边缘 IP 列表或使用 ALB 提供的间接访问）。

## 详细内容

1. 原点为 EC2
- 若直接使用公有 EC2 实例作为原点，实例必须具有公共 IP 并在安全组中允许来自 CloudFront 边缘 IP 的入站流量（或更广泛的 HTTP 端口策略，但须谨慎）。

2. 原点为 ALB（推荐）
- 使用 ALB 更常见：ALB 可作为原点，而后端 EC2 实例可以留在私有子网，ALB 与后端通过 VPC 私有连接通信，简化安全组配置。
- 注意 CloudFront 边缘访问 ALB 时仍需确保 ALB 的安全组允许来自边缘位置的流量（可参考 CloudFront 公共 IP 列表或借助更严格的访客策略）。

3. 安全性与可用性
- 无论使用 EC2 还是 ALB，建议使用 HTTPS/证书、适当的安全组与 Web 应用防火墙，并结合 CloudFront 的缓存与加速功能来降低原点负载和提高稳定性。

## 自测问题

1. 若把私有 EC2 实例作为 CloudFront 原点，最安全的实现方式是什么？
2. ALB 作为原点时，为什么后端 EC2 可以是私有的？
