---
source: 11 - Classic Solutions Architecture Discussions\007 Beanstalk Hands On_zh.srt
---

教练：好的, 让我们继续练习使用Beanstalk服务｡

现在我将进入Elastic Beanstalk控制台,

我们将创建第一个应用程序｡

因此, 我们可以选择Web服务器环境或工作环境｡

所以现在, 我们想要运行一个网站,

所以我们将选择Web服务器环境,

但是如果你想处理队列中的任务, 那么我们将选择一个工作环境, 但我们只会做Web服务器｡

让我们创建一个应用程序, 这个应用程序叫做MyApplication｡

接下来, 我们向下滚动, 我们有环境信息｡ 

环境是自动填充的,

但我将其称为MyApplication-dev,

因为它将表示我的开发环境｡

域名将自动为我的应用程序生成,

这就是我将如何访问我的Web服务器｡

好的, 我们向下滚动,

现在我们需要选择一个平台｡

因此, 这个平台将被管理, 我将选择Node｡

js,

然后我将只选择默认选项｡

您可能会看到一些与我不同的东西,

但通过使用最新的默认值, 您应该很好,

可以继续使用｡

接下来, 我们需要选择一些应用程序代码｡ 

所以我们将使用一个示例应用程序,

我们当然可以上传自己的代码,

但我们现在没有｡

因此, 这个示例应用程序将与我这里的环境相匹配｡

好的, 让我们向下滚动,

我们有预设, Beanstalk的配置可能非常复杂,

因此, 我们可以为单个实例设置推荐值,

这是免费层资格, 或高可用性, 例如, 我们有一个负载均衡器, 或自定义配置,

如果你想自定义一切｡

现在为了简单起见,

我们将讨论单个实例｡

因此, 我们单击Next,

接下来我们遇到了一个棘手的问题,

我们需要配置服务访问｡

因此, IAM角色将允许Beanstalk做它需要做的事情｡

这非常简单,

我们可以继续创建一个新的服务角色, 这将创建Elastic

Beanstalk服务角色｡

现在, 我认为现在这是一个新的控制台,

所以可能有一个bug, 并且这不是预填充的,

所以我们需要继续手动创建EC2实例配置文件｡

因此, 我将进入IAM控制台, 在左手边,

我将进入角色,

我将创建一个角色｡

这是一个服务, 它是EC2的, 你点击Next｡ 

然后, 对于权限策略, 您只需过滤并输入Beanstalk,

然后您需要添加web层, worker层和多容器docker｡

这应该足够开始了｡ 

因此, 我们单击Next, 然后在角色名称中输入AWS,

然后输入Elastic Beanstalk EC2 role, 中间使用连字符｡

好的, 现在我们继续, 我们创建这个角色这个角色就是我们在豆茎中要用的角色.

所以我回到这里, 我刷新了这个, 正如你所看到的,

它被预填充了, 所以Elastic

Beanstalk EC2角色｡

所以一旦你完成了, 你就可以开始了｡ 

如果你点击Next,

你将不得不浏览网络､ 数据库和实例流量扩展,

所有这些东西, 但它们是可选的｡

现在, 我们要做的就是单击Skip来查看,

因为我们只想使用为单实例模式设置的默认值｡

因此, 请确保在Service

Access下选择了服务角色和EC2实例配置文件｡

当你准备好了, 你当然可以看看这些,

但它们很复杂｡

单击Submit, 这将创建我们的第一个Beanstalk环境｡

现在, 如果我们向下滚动到“事件”下,

可以看到, 一些事件正在发生, 这些事件实际上来自一个名为CloudFormation的服务｡

因此, 如果您进入CloudFormation控制台,

我们可以看到确实有一个由Beanstalk创建的堆栈, 并且这个服务CloudFormation允许我们在后台创建资源｡

所以我不会详细介绍它, 但正如您所看到的,

事件描述了CloudFormation模板是如何创建的｡

如果你在模板下, 这是生成我们的应用程序的模板,

在设计器中查看, 我们实际上可以选择查看CloudFormation正在创建的架构类型｡

正如我们所看到的, 我们有一个自动扫描器组,

一个安全组, 一个启动模板, 一个弹性IP, 还有一些称为权重条件的东西｡

所以我不想在这上面逗留太久,

但这个想法是, 豆茎想要创建的所有资源实际上都是由CloudFormation在幕后创建的｡

因此, 在Events选项卡中, 正如我们现在所看到的,

我们有一些信息, 例如,

创建了一个安全组, 然后创建了一个弹性IP｡

然后我们等待EC2实例启动,

然后创建实例｡

所以如果我现在切换到EC2下, EC2控制台, 看看我的实例正在运行,

实际上是的, 我的一个实例正在运行,

它使用的是T3 micro｡

我们可以看到,

这个实例在这里有一个公共IP地址｡

如果我在左手边的Elastic IP下,

我们可以看到这个Elastic IP地址已经创建并分配给我们的EC2实例｡

如果我转到Auto Scaling groups下,

我们可以看到创建了一个Auto Scaling group,

并且在Instance Management下的这个Auto Scaling

group正在管理我唯一的EC2实例, 这就是为什么它被称为单个EC2实例｡

所以所有这些都是有意义的,

这就是为什么豆茎被创造出来｡

在它结束时, 当一切都启动时,

你会说, 好的, 成功启动,

它将对健康有益｡

我们从中得到的是一个域名｡ 

因此, 如果我单击这个域名并在新选项卡中打开它,

我实际上可以访问我的Beanstalk环境和我的单个EC2实例｡

它说, “恭喜你, 你现在正在这个EC2实例上运行Elastic

Beanstalk, ”这真是太棒了｡

正如你所看到的, 很简单,

Beanstalk为我们创建的,

只是从代码, 我们使用的示例代码,

它生成了所有的基础设施, 成功启动我的应用程序,

我的Web服务器, 这非常非常好｡

现在, 让我们来看看几种选择｡ 

所以如果我们想上传一个新版本, 我们点击这里,

我们可以上传一个新版本,

它会自动部署到我的EC2实例｡

所以我们没有, 但只是给你一个概述, 健康为您提供了一些有关所有实例的健康检查的信息,

如果你有很多实例的话｡

您可以在Logs下查看应用程序的日志｡ 

您可以在Monitoring下查看应用程序的所有指标,

因此我们实际上是围绕所有应用程序本身的视图｡

警报, 管理更新, 这是当Beanstalk决定更新我们的整个环境｡

然后, 如果您单击Configuration,

您实际上可以查看Beanstalk环境的所有配置,

修改它们并应用它们, 这些配置非常非常全面,

但我们现在不需要知道这些｡

现在, 更重要的是, 如果我们转到MyApplication下,

正如我们在这里看到的, 有MyApplication-dev,

这是一个环境, 但我可以继续创建第二个环境,

例如, MyApplication-prod,

这将允许我们真正考虑整体环境｡

以上就是对Beanstalk的概述｡ 

因此, Beanstalk以代码和代码环境为中心,

而如果你想看看CloudFormation, 我们以前见过的服务,

CloudFormation用于在任何类型的基础设施上任意部署堆栈｡

我们已经看到了Beanstalk创建的所有内容,

包括我的自动扫描组､

我的EC2实例､ 弹性IP等等｡

因此, 如果您参加的课程有更多的Beanstalk讲座,

例如Certified Developer课程,

那么不要删除您的应用程序, 我们会更多地使用它｡

但是如果你完成了豆茎的讲座, 你已经为考试知道了足够的东西｡

所以你可以做的就是把你的应用程序, 做动作,

然后删除应用程序, 然后你就清理干净了｡

就这样, 你们自己打电话,

我们下节课再见｡
