---
source: 08 - High Availability and Scalability ELB & ASG\015 Auto Scaling Groups (ASG) Overview_zh.srt
---

教师：现在我们来讨论一下什么是自动扩展组｡

因此, 当我们部署一个网站或应用程序时, 负载会随着时间的推移而变化,

因为随着时间的推移, 我们可能会有更多的用户访问我们的网站｡

我们已经看到, 在云中,

在AWS中, 我们可以使用EC2实例创建API调用快速创建和删除服务器｡

因此, 如果您希望自动执行此操作,

我们可以创建一个自动扩展组｡

因此, ASG的目标是横向扩展, 这意味着添加EC2实例,

您需要记住这一点, 横向扩展以匹配增加的负载, 或横向扩展, 这意味着删除EC2实例以匹配减少的负载｡

因此, ASG的规模将随着时间的推移而变化｡

总的来说, 我们还可以定义参数,

以确保在ASG中随时运行最小和最大数量的EC2实例｡

ASG还有一个超级功能,

如果您将其与负载平衡器配对, 则作为ASG一部分的任何EC2实例都将链接到负载平衡器｡

另一个超级功能是,

如果一个实例被认为是不健康的, 它将被终止,

并创建一个新的EC2实例来替换它｡

因此, 自动扩展组是免费的,

您只需为在其下创建的任何资源（如EC2实例）付费｡

让我们来看看ESG在AWS中的工作方式｡ 

因此, 我们设置了一个最小容量,

即您希望ASG中至少有多少个实例｡

比如说, 两个｡ 

然后设置所需容量,

即ASG中需要的实例数,

例如四个, 然后设置最大容量,

即ASG中最多需要多少个实例｡

这意味着, 如果您将所需容量移至更高的数字,

但仍低于最大容量,

则可以根据需要进行横向扩展｡

这意味着横向扩展意味着添加EC2实例,

因此您的ASG可以越来越大｡

在本例中, 最大容量为7｡ 

正如我所说的, ASG还可以与负载平衡器一起工作｡ 

因此, 如果我们在ASG中注册了四个实例,

则ELB会立即将流量分发到所有这些实例,

以便您的用户可以访问负载平衡的网站｡

但是ELB还能够使用运行状况检查来检查EC2实例的运行状况,

并且可以将该运行状况检查传递给ASG｡

这意味着, 如果负载平衡器认为EC2实例不正常,

ASG可以终止它们, 这非常方便｡

此外, 如果您进行横向扩展, 也就是说, 如果您添加EC2实例,

那么ELB当然也会向它们发送流量并分散负载｡

因此, 使用负载平衡器和自动扩展组确实是一个很好的组合｡

现在, 就创建ASG的属性而言,

您需要创建一个启动模板｡

曾经有一种东西叫做启动配置,

但它已经过时了, 但想法是一样的｡

启动模板包含有关如何在ASG中启动EC2实例的信息｡

因此, 您可以获得有关AMI和实例类型､

EC2用户数据､ EBS卷､ 安全组､

SSH密钥对､ EC2实例的IAM角色､ 网络和子网信息以及负载平衡器信息等信息｡

因此, 所有这些参数看起来都很像我们在创建EC2实例时指定的参数｡

最重要的是, 您的ASG有一个最小大小､

一个最大大小和一个初始容量, 我们需要定义它们以及扩展策略｡

谈到扩展策略, 让我们看看CloudWatch警报如何与自动扩展集成｡

当然, 你们还不知道什么是CloudWatch,

但现在让我来简单介绍一下｡

因此, 基于CloudWatch警报的ASG可以进行横向扩展和纵向扩展｡

例如, 我们这里有一个ASG,

其中有三个EC2实例,

警报将被触发, 因此我们将进行横向扩展活动｡

那么什么会触发警报呢？

它是一个可以返回的指标, 例如,

平均CPU或任何您想要的自定义指标｡

例如, 如果ASG的平均CPU整体过高,

则需要添加EC2实例, 因此警报将被触发, 并将触发自动扩展组中的扩展活动,

这就是它被称为自动扩展组的原因, 因为与警报配合使用时, 在后台有一个自动扩展功能｡

因此, 根据警报, 我们可以创建横向扩展策略｡ 

这意味着增加实例的数量, 或者我们可以在策略中创建规模来减少实例的数量｡

所有这些因素共同构成了ASG｡ 

我希望你们喜欢它, 我们下节课再见｡
