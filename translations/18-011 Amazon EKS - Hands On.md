---
source: 18 - Containers on AWS ECS, Fargate, ECR & EKS\011 Amazon EKS - Hands On_zh.srt
---

- ：所以我想给你看一个亚马逊EKS的快速操作,

但这完全超出了这个功能｡

所以, 如果你真的决定做这件事,

你将花费相当多的钱｡

因此, 我建议您观看我的演示, 以便更好地了解AWS的每个服务的Kubernetes｡

因此, 我们将在AWS上创建一个新集群｡ 

所以我用demo EKS作为名字｡ 

我可以选择Kubernetes版本｡ 

我将使用默认值,

然后我们需要有一个服务角色来管理一切｡

因此, 要创建此角色, 我需要遵循EKS用户指南中的说明｡

因此, 我转到IAM, 然后我将不得不为EKS创建一个角色｡

然后, 我需要添加EKS群集角色｡ 

所以我们开始吧｡ 

我们要去扮演角色了｡ 

创建角色｡ 

这是为一个服务｡ 

这是用于EKS服务的｡ 

我们走吧｡ 

我们将建立EKS集群, 以允许访问由我们的集群运行的其他服务｡

我们开始吧｡ 

我们很好｡ 

下一个

则该权限已被选中, 并且角色名称为EKS群集角色｡

让我们创建此角色｡ 

无效的名称, 所以我们只删除开头的第一个空格｡

现在, 角色正在创建｡ 

好的, 让我们刷新一下, 我们可以在这里找到这个角色｡

现在, 我们是否要使用KMS加密我们的秘密？

现在我不打算这么做, 但这是一种安全的可能性｡

那么, 您希望将群集部署在何处？

因此, 我们有一个VPC和子网｡ 

这就是我们, 我们高度可用｡ 

然后安全组我们要退出这个｡ 

例如, 我们可以选择默认安全组｡ 

然后我们选择IPv4类型的服务｡ 

然后, 集群端点访问将是公共的, 以便我们可以从自己的计算机访问它｡

我们需要任何网络附加组件吗？

因此, 我们将再次选择默认值,

并为代理和DNS选择默认值｡

正如您所看到的, 这些配置非常多,

EKS应该是它自己的课程｡

老实说, 我只是想给你介绍一下选项, 这样你就能明白发生了什么｡

然后, 我们可以为控制平面配置日志记录｡ 

我不打算这么做｡ 

然后检查设置｡ 

因此, 我们已经设置了安全组､ 联网､ 集群､ API公共访问,

并且我们准备就绪｡

让我们来创建这个｡ 

这样做的目的是创建群集本身,

然后我们必须为群集创建节点｡

现在我的集群已经创建完毕｡ 

下一步是通过添加受管节点组或创建fargate配置文件来为集群配置计算容量｡

我们已经在概述中看到了这一点, 这正是我想向大家展示的｡

因此, 如果我们进入资源, 这就是所有Kubernetes资源的管理位置｡

这是Kubernetes特有的知识

但这是你为Kubernetes专家准备的｡ 

在计算中, 我们可以在此添加节点组｡ 

如果我进入节点组, 我可以在此处添加节点组｡ 

我称之为一个演示节点组｡ 

您需要为此节点组创建IAM角色｡ 

因此, 我们进入IAM控制台...

然后我们创建一个新角色｡ 

此角色适用于属于我的管理节点组的EC2实例｡

因此, 我将使用EC2,

然后搜索策略｡

我将键入EKS, 您希望在其中添加Amazon

EKS工作节点策略｡

让我们单击“下一步”｡ 

对于这个, 我将输入,

它在文档的某个地方｡

所以我会进入...

Amazon EKS节点角色,

实际上有添加权限｡

然后, 我们还需要在此添加Amazon

EC2容器注册表只读策略｡

所以我们回去吧｡ 

在这里, 我们将编辑权限并再添加一项内容｡

Amazon EC2容器注册表｡ 

我们来看看这个｡ 

我们走吧｡ 

下一个就是这里｡ 

我们准备好了｡ 

让我们创建此角色｡ 

所以不要从空间开始｡ 

我们走吧｡ 

角色已创建...

现在, 我可以进入此处进行刷新,

然后我将找到Amazon EKS节点角色｡

好极了｡  那么, 我们是否希望为EC2实例提供一个启动模板？

我们可以指定一个,

但我将不勾选此选项, 然后单击“下一步”｡

我们需要哪种类型的节点组？

所以亚马逊Linux 2很棒｡ 

我们需要按需还是现货实例？

我们需要哪种类型的实例？

所以我们要T3培养基？ T3微？ 你想怎么样都行｡ 

光盘大小是多少？

什么是节点扩展配置？

那么, 您希望在节点组中包含多少个节点？

这是操作系统扩展组的设置｡ 

那么, 什么是节点组更新？

那么, 当您更新时,

您可以容忍多少个节点更新？

点击下一步｡ 

您要访问哪些子网？

然后, 当我们准备就绪时,

我们创建这个托管节点组｡

为了向您展示这一点,

这是为Amazon EKS集群部署EC2实例的方式,

但它们完全由AWS管理, 这使得部署非常简单｡

另一种方法是在这里创建节点｡ 

我们再上一层, 回到计算机｡ 

创建节点的另一种方法（除了从该节点组创建节点）实际上是使用fargates,

而fargates允许您不配置EC2实例｡

因此, 我们需要设置并添加目标配置文件｡

我们不能这样做｡ 

我只想向您展示fargate配置文件的节点组选项｡

其实用不着这一套｡ 

所以我会在它创建完成后删除它｡ 

最后一个选项是插件｡ 

因此, 如果我们想实际使用EBS卷, 我们可以安装附加组件｡

其中之一是Amazon EBS CSI驱动程序｡ 

这将使我们能够将EBS用于Amazon

EKS群集, 并且它们将成为EFS

X､ EFS等的STS端驱动程序｡

好吧, 我会的 这是所有的动作, 我会给你们看｡ 

Kubernetes需要自己的知识是诚实的,

这是非常非常困难的,

需要一个完整的课程｡

我现在要做的就是删除此群集｡

为此, 我将键入demo EKS, 这将是我想向您展示的全部内容,

即如何创建EKS集群, 以及如何删除需要删除的第一个笔记组｡

我会从视频中跳过这一点｡ 

这节课就讲到这里｡ 

希望你喜欢｡ 

我们下节课再见｡
