---
source: 24 - AWS Monitoring & Audit CloudWatch, CloudTrail & Config\009 EventBridge Overview (formerly CloudWatch Events)_zh.srt
---

讲师：现在我们来讨论一下Amazon EventBridge,

Amazon EventBridge以前的正式名称是CloudWatch

Events, 因此您将在考试中看到EventBridge, 但您要知道, 如果您有过AWS的经验, 那么它以前的名称是CloudWatch

Events｡

因此, 使用EventBridge, 您可以做很多事情｡ 

例如, 我们可以在云中安排cron作业,

这样我们就可以安排脚本｡

例如, 我们说, “嘿, 每小时请触发一个Lambda函数”,

Lambda函数将运行一个脚本｡

因此, 事件每小时生成一次, 因此命名为Amazon

EventBridge, 但不仅仅是像每小时这样的时间表, 它还可以对事件模式做出反应｡

因此, 有一些事件规则可以对服务执行某些操作做出反应｡

例如, 您可以在控制台中对IAM

root用户登录事件做出反应｡

所以当这种情况发生时, 也许你想发送一条消息到一个SNS主题,

并收到一封电子邮件通知, 这样如果有人正在使用根帐户,

那么你就会收到一封电子邮件, 这可能是一个很好的安全功能, 为您的帐户｡

还有, 比如说, 你有不同的目的地, 你可以触发Lambda函数,

发送SNS和SQS消息, 等等,

我马上会给你展示这一切｡

因此, EventBridge位于中间,

我们拥有所有可以将事件发送到Amazon EventBridge的源｡

例如, EC2实例何时启动､

何时停止､ 何时终止等｡

代码构建, 例如,

如果您有一个构建失败或S3,

每当有一个事件, 例如, 当一个对象上传,

或可信顾问, 当您有一个新的安全发现在您的帐户或作为一个很好的组合,

您可以结合EventBridge和CloudTrail,

并实际拦截任何API调用在您的AWS帐户, 这是巨大的｡

另外, 正如我所说的, 您可以有一个时间表或cron,

因此您可以说每四个小时或每个星期一上午8：00, 即每月的第一个星期一, 这也是您可以做的事情｡

然后, 这些事件被发送到AmazonEventBridge,

您可以设置一个过滤器｡

例如, 你说, “嘿, 我只想要一个特定桶的这些事件,

”因为亚马逊是免费的, 例如｡

然后, EventBridge将生成表示事件详细信息的相邻文档｡

例如, 哪个实例启动, 它的ID是否是,

等等｡

很多信息, 时间, IP等等｡ 

完成后, 这个JSON文档､ 这个事件就可以发送到很多不同的目的地,

这样您就可以进行非常棒的集成｡

例如, 您可以调度和触发Lambda函数, 您可以在AWS

Batch中调度批处理, 您可以为Amazon ECS启动ECS任务,

您可以向SQS､ SNS甚至Kinesis数据流发送消息, 例如, 您可以启动Step Function, 您可以使用CodePipeline启动CI/CD管道或使用CodeBuild启动构建, 当然, 您实际上并不了解所有这些内容, 这些是不同的AWS服务,

但我只是概括介绍一下您可以执行的操作, 例如, 您还可以启动SSM自动化或特定的EC2操作,

如启动､ 停止或重新启动EC2实例｡

因此, 您可以看到可能性是无限的,

这实际上取决于您的用例｡

Amazon EventBridge就是我们所说的默认事件总线,

也就是我们刚才看到的, 它代表AWS的服务, 这些服务将其事件发送到默认事件总线,

但Amazon EventBridge具有更多功能｡

有一种称为合作伙伴事件总线的东西,

这是与合作伙伴集成的AWS, 他们很可能是软件即服务合作伙伴,

他们会将自己的事件直接发送到您的合作伙伴事件总线｡

因此, 如果您使用的是Zendesk､ Datadog､ Auth0或其他产品,

则需要查看合作伙伴列表｡

这样, 他们就有机会将其事件直接发送到指定的合作伙伴事件总线,

这样, 您就可以直接在您的帐户中对AWS之外发生的更改做出反应｡

最后, 还有一个自定义事件总线,

您可以创建自己的事件总线,

然后您自己的应用程序可以将自己的事件发送到自定义事件总线中, 因此,

由于EventBridge规则, 您可以将这些事件发送到不同的目标｡

此外, 您还可以使用基于资源的策略访问事件总线､

跨帐户, 我们很快就会看到这一点｡

您还可以将事件归档, 以便将所有事件或仅将事件子集归档到筛选器中,

通过归档事件, 您可以将其设置为无限期保留或设置保留期,

好吗？

您可以使用这些事件来重放这些存档的事件｡

例如, 假设您的Lambda函数中有一个bug,

您希望修复它, 因此您修复了它,

然后您希望重新测试该事件, 重放它,

然后您可以重放这些存档的事件, 这对于调试､ 故障排除和修复生产都非常方便｡

现在, EventBridge从不同的位置接收大量事件,

因此, 您需要了解这些事件的外观, 并记住, 这些事件采用我们刚刚看到的这种相邻格式｡

因此, 有一个架构注册表,

EventBridge将分析总线中的事件, 然后推断架构,

架构注册表中的架构将允许您为应用程序生成代码, 该代码将提前了解数据在事件总线中的结构｡

例如, 这是一个正在运行的特定CodePipeline的示例｡

有一个模式, 你可以直接使用橙色按钮下载代码,

这将直接知道如何推断模式, 并从你的事件总线中构造数据｡

当然, 还可以对模式进行版本控制,

这样您就可以随着时间的推移在应用程序的模式之间进行迭代｡

现在, 我们为EventBridge提供了基于资源的策略,

这意味着什么？

这意味着您可以管理特定事件总线的权限｡

例如, 您可以说,

可以允许或拒绝来自其他地区或帐户的其他事件和特定事件总线,

例如, 它的用例将是在AWS组织内拥有一个中央事件总线, 因此一组帐户和所有这些事件将被聚合, 那么这是如何工作的呢？

我们有一个带有特定帐户的中央事件总线,

我们将添加一个基于特定资源的策略,

允许其他帐户向其发送事件, 因此,

例如, 这个其他帐户将能够执行放置事件并将事件直接发送到中央事件总线｡

就是这样, 我们已经从左到右看过EventBridge,

您对它了如指掌｡

请记住, 您可以对帐户内发生的事件做出反应,

这要归功于默认的事件总线,

但也可以对合作伙伴事件和您自己的事件做出反应, 这要归功于自定义总线､

架构注册表功能以及基于资源的策略, 这些策略允许您拥有跨帐户功能, 例如, 事件总线功能｡

好了, 就这样, 希望你们喜欢,

我们下节课见.
