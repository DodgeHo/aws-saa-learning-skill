---
source: 27 - Networking - VPC\010 Bastion Hosts_zh.srt
---

- ：现在我们来讨论堡垒主机,

我们的想法是, 我们的用户希望访问私有子网中的EC2实例,

但我们作为用户, 我们是在公共互联网上的计算机上｡

显然, 由于EC2实例位于私有子网中,

因此无法通过Internet直接访问它｡

所以诀窍, 或者至少有一个诀窍,

就是使用堡垒主机｡

堡垒主机是一个EC2实例, 命名为堡垒主机,

明白吗？

EC2实例是特殊的, 因为它位于公共子网中｡

它有自己的安全组, 称为堡垒主机安全组,

当然, 我们也有一个安全组,

用于私有子网中的EC2实例｡

现在, 我们的想法是, 公共子网中的EC2实例（我们的堡垒主机）可以访问私有子网中的EC2实例,

因为所有内容都在我们的VPC中｡

现在, 要访问私有子网中的EC2实例, 我们首先要通过SSH连接到堡垒主机,

然后再通过SSH从堡垒主机连接到私有子网中的EC2实例｡

它可以是一个,

也可以是多个EC2实例｡

因此, 概括地说, 堡垒主机是我们通过SSH访问私有EC2实例的一种方式｡

而且我们必须把堡垒主机放在公共子网里｡ 

所以在安全组规则方面, 这是考试可以拿出的东西,

我们需要了解我们可以定义什么｡

所以从堡垒主机的角度来看,

安全组必须允许从互联网访问,

好吗？

但是, 我们不能允许来自互联网的任何地方的访问,

因为这可能会带来安全风险,

我们只能限制, 例如,

来自您公司的公共CIDR的访问或您的互联网访问等｡

因此, 我们必须尽可能地限制堡垒主机的EC2安全组,

以保证只有少数选定的IP可以访问它,

因为如果随机攻击者以某种方式访问我们作为堡垒主机的EC2实例,

这可能会对我们的基础设施造成安全风险｡

现在, 就私有子网中EC2实例的安全组而言,

它们必须允许SSH访问, 因此再次在端口22上, 从堡垒主机的私有IP或堡垒主机的安全组开始, 这是等效的｡

这是因为这些EC2实例看到的流量源自此堡垒主机｡

这节课就讲到这里,

希望你们喜欢,

下节课再见.
