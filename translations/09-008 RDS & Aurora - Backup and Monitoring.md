---
source: 09 - AWS Fundamentals RDS + Aurora + ElastiCache\008 RDS & Aurora - Backup and Monitoring_zh.srt
---

教师：现在我们来谈谈RDS备份｡ 

首先, 您有自动备份, 这意味着此服务RDS服务将在数据库备份窗口期间自动执行数据库的每日完整备份｡

但最重要的是, 每五分钟就会备份一次事务日志｡

这意味着您拥有的最早备份是现在之前的五分钟｡

这意味着, 从这些自动备份中,

您可以恢复到五分钟前的任何时间点｡

对于自动备份保留, 您可以说保留时间在1到35天之间｡

如果您想禁用此功能,

您可以设置零以禁用自动备份｡

第二个选项是手动执行数据库快照,

手动数据库快照｡

正如其名称所示, 这些都是由用户手动触发的｡

但它的好处是,

这个备份, 你手动做的, 你可以保留它,

只要你想｡

因此, 自动备份会过期,

而手动的数据库快照可以保留多长时间｡

所以这里有一个技巧｡ 

什么时候你会使用备份, 很明显, 备份你的数据,

而且如果你想节省一些成本｡

例如, 您有一个RDS数据库,

并且您知道每月仅使用它两个小时｡

而不是停止数据库, 例如, 即使数据库停止,

您仍然需要支付存储费用｡

你可以做的是, 在使用它两个小时后,

你做一个快照, 然后删除原始数据库｡

快照的成本远远低于RDS数据库的实际存储｡

当您准备再次使用数据库时,

您将恢复快照并使用它｡

所以这是个小技巧, 考试时会用到｡ 

现在对于Aurora备份, 它实际上非常相似｡ 

您可以自动备份1到35天,

但无法禁用｡

所以在RDS上, 它们可以被禁用, 但在Aurora上不行｡ 

而且您可以在该时间范围内的任何时间点进行时间点恢复,

因此您可以恢复到所需的任何状态｡

现在, 对于手动数据库快照,

它们也可以由用户手动触发, 您可以根据需要保留它们｡

因此, 您可以看到Aurora和RDS备份非常相似｡ 

现在, 恢复选项如何？

首先, 您可以将RDS或Aurora备份或快照恢复到新的数据库中,

它们是相同的｡

因此, 每当您恢复自动备份或手动快照时,

它都会创建一个新的数据库｡

另一个选项是您可以从S3恢复MySQL

RDS数据库｡

S3, 我们还没有看到它,

它是一种在AWS上将对象存储在云中的方法,

这是一种非常受欢迎的服务,

其想法是您将创建本地数据库的备份, 然后将其放置到Amazon

S3上, 这是一些对象存储｡

最后, RDS中有一个选项, 可以将备份文件从Amazon

S3恢复到运行MySQL的新RDS实例上｡

如果你想恢复到MySQL

Aurora集群, 你可以做的是再次备份你的本地数据库, 所以在外部,

然后你使用一个名为Percona XtraBackup的软件｡

现在只能用这个｡ 

然后, Percona XtraBackup的备份文件将转到Amazon

S3｡

然后, 您可以将备份文件恢复到运行MySQL的新Aurora集群上｡

所以这里的区别是, 为了恢复到RDS MySQL,

您只需要备份数据库以恢复到Aurora

MySQL｡

您需要做的是使用Percona

Xtrabackup进行备份, 然后从S3备份到Aurora

DB集群｡

好的, 这些是快照或数据库转储到AmazonS3的恢复选项｡

最后, 还有一个您需要了解的功能,

称为Aurora数据库克隆｡

因此, 这允许您从现有的Aurora数据库集群创建新的Aurora数据库集群｡

假设您在Aurora中有一个生产数据库,

并且您希望实际在其上运行测试, 但是您希望复制数据,

因为您的测试应用程序必须在登台环境中｡

好吧, 为此, 您只需克隆您的生产Aurora数据库｡

它会给你一个新的数据库, 你可以称之为,

例如, Staging Aurora数据库｡

而且会很快｡ 

它比执行快照和恢复更快｡ 

那么, 为什么克隆使用写时复制协议, 它是如何工作的呢？

最初, 当您创建数据库克隆时,

它将使用与原始数据库集群相同的数据卷,

这将是快速和高效的, 因为您没有任何数据复制｡

然后, 在对生产Aurora数据库或Staging

Aurora数据库进行更新时,

将分配新的附加存储, 并将复制和分离数据｡

所以这意味着你拥有两个世界最好的东西｡ 

因此, 执行数据库克隆非常快速且经济高效,

并且在不影响生产数据库并且不使用快照和恢复功能的情况下从生产数据库中创建临时数据库非常有用｡

好吧, 就这样｡ 

我们已经看到了备份和恢复以及克隆的所有选项｡

希望你喜欢｡ 

我们下节课再见｡
