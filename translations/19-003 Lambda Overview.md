---
source: 19 - Serverless Overviews from a Solution Architect Perspective\003 Lambda Overview_zh.srt
---

- ：那么什么是AWS Lambda, 为什么它对我们有帮助？

让我们举个例子｡ 

我们将从Amazon EC2开始｡ 

而Amazon EC2,

正如我们所知, 它们是云中的虚拟服务器,

我们必须对其进行配置,

因此我们受到要配置的内存和CPU数量的限制｡

它们必须持续运行,

我的意思是, 我们可以通过有效地启动和停止它们来优化它们,

但除此之外, 它们会持续运行,

而不管您的实例上是否发生了什么｡

如果您想要扩展, 可以使用自动扩展组,

但这意味着您需要执行一些操作来自动添加和删除服务器｡

现在, 这是一种做事的方法,

而且效果很好｡

但还有AWS Lambda｡ 

所以对于Lambda, 这些是视觉函数｡ 

没有要管理的服务器｡ 

因此, 这意味着我们只需提供代码和运行函数｡

它受到时间的限制,

所以我们谈论的是最多15分钟的短处决,

在我看来, 不是那么短｡

最后, 它们按需运行｡ 

这意味着当你不使用Lambda时,

你的Lambda函数就不会运行,

只有当你的函数运行时, 你才会被计费｡

当它被调用时, 它将按需运行, 这是Amazon

EC2的一个巨大转变｡

最后, 缩放是自动化的｡ 

如果您需要的不仅仅是函数､ 出现次数和并发性, 那么AWS会自动为您提供更多的Lambda函数｡

不可思议｡ 

我们将在实践中看到这一点｡ 

所以Lambda的好处｡ 

我相信你见过很多｡ 

首先, 定价是超级容易的｡ 

你要为Lambda接收的请求数､

调用数以及你的计算机时间（Lambda运行了多长时间）付费｡

Lambda上有一个非常慷慨的免费层,

即100万个Lambda请求和400,

000 GB秒的计算时间｡

正如我们将看到的,

它还集成了许多一流的服务｡

我们可以在Lambda上使用很多不同的编程语言,

所以我们非常自由｡

此外, 还可以非常轻松地与CloudWatch进行监控集成｡

最后, 如果您希望为每个功能配置更多资源,

则可以为每个功能配置多达10

GB的RAM, 这是一个很大的容量｡

顺便说一句, 你需要知道：如果你增加你的函数的RAM,

那么它也会提高你的CPU和网络的质量和性能,

所以｡

现在我们来讨论一下Lambda的语言支持｡ 

我们有节点｡  js, 用于JavaScript､

Python､ 与Java 8兼容的Java或Java 11,

C#用于｡ NET核心, Golang, C# for

Powershell, Ruby, 你可以为Lambda编写几乎任何语言,

这要归功于社区支持的自定义运行时API｡

例如, 如果你想在Lambda上运行Rust语言函数,

这要归功于一个开源项目｡

所以Lambda有很多语言支持｡ 

它还支持Lambda容器映像｡ 

所以这个Lambda容器图像是非常特别的｡ 

容器映像本身必须实现Lambda运行时API,

因此它不是任何可以在Lambda上运行的容器映像｡

关于如何构建容器映像,

需要有一些先决条件｡

然后ECS和Fargate仍然是运行任意Docker映像的首选｡

因此, 如果考试要求您在Lambda上运行一个容器,

除非该容器实现了Lambda运行时API,

否则您将在ECS或Fargate上运行该容器｡

现在, 我说Lambda整合了这么多一流的服务｡

所以我会给你们一些关于它们是如何整合的想法｡

在本课程中, 我们将看到其中的一些集成｡ 

因此, API Gateway将创建一个REST API, 它们将调用我们的Lambda函数｡

Kinesis将使用Lambda动态地进行一些数据转换｡

DynamoDB将用于创建一些触发器, 因此每当数据库中发生某些事情时,

Lambda函数将被触发｡

亚马逊S3, 我们已经看到了｡ 

Lambda功能将在任何时候被触发,

例如, 在S3中创建文件｡

CloudFront, 这将是Lambda@edge,

我在这一节有一个专门的讲座｡

云监视事件或事件桥｡ 

每当AWS基础架构中发生问题时, 我们都希望能够对问题做出反应｡

例如, 假设我们有一个被切断的管道,

状态发生了变化, 我们想在此基础上进行一些自动化操作,

我们可以使用Lambda函数｡

CloudWatch Logs, 可将这些日志流传输到您想要的任何位置｡

SNS对通知和您的SNS主题做出反应｡ 

SQS处理来自SQS队列的消息｡ 

最后是Cognito, 它可以在用户登录到数据库时做出反应｡

所以, 这些只是主要的｡ 

有很多Lambda积分｡ 

我想给大家看一个很好的例子, 这是一个无服务器的缩略图创建｡

假设我们有一个S3存储桶,

我们希望动态创建缩略图｡

因此, 将有一个事件,

这是新的形象将上传到亚马逊S3｡

这将通过S3事件通知触发Lambda功能｡

Lambda函数将包含生成缩略图的代码｡

该缩略图可以被推送并上传到另一个S3桶或相同的S3桶中,

这将是该图像的更小版本｡

此外, 我们的Lambda函数可能希望在DynamoDB中插入一些数据,

围绕图像的一些元数据, 例如图像､

名称､ 大小､ 创建日期等｡

多亏了Lambda, 我们已经实现了自动化,

并拥有了一个反应式架构,

以响应在S3中创建的新应用程序和新映像的事件｡

另一个非常流行的例子是无服务器CRON

drop｡

CRON是EC2实例上的一种方式,

例如, 每五分钟或每周一上午10：00生成一次作业,

等等｡

但是您需要在虚拟服务器上运行CRON｡ 

所以一个ECE两个实例等等｡ 

因此, 当您的实例没有运行时, 或者至少您的CRON没有执行任何操作时,

您的实例时间就被浪费了｡

因此, 您可以创建每1小时触发一次的CloudWatch事件规则或EventBridge规则｡

每隔1小时, 它将与Lambda函数集成,

执行您的任务｡

这是一种创建无服务器CRON的方法,

因为在这个例子中, CloudWatch Events是无服务器的,

Lambda函数也是无服务器的｡

现在, 让我们以Lambda定价为例｡ 

所以你可以在这个网站上找到所有的信息,

以防这里的信息过时, 但它会给你一个如何工作的例子｡

所以你按次付费｡ 

前100万个请求是免费的,

然后你要为每100万个额外的请求支付20美分｡

所以这是一个非常非常便宜的请求｡ 

然后, 你要支付每持续时间的增量1（音频剪切）秒｡

因此, 您每月可免费获得前400,

000 GB秒的计算时间｡

这意味着, 如果函数有1GB的内存,

那么它的执行时间是400, 000秒｡

也就是说, 如果函数的内存是原来的八分之一,

那么你得到的时间是原来的八分之一,

也就是128 GB, MB的内存.

之后, 您将为600,

000千兆字节秒支付1美元｡

所以说实话, 你可以计算一下,

在Lambda上运行你的代码通常非常非常便宜｡

因此, 它是创建应用程序的一个非常流行的选择｡ 

原来如此｡ 

现在, 让我们进入实践环节,

了解Lambda的工作原理｡
