---
source: 11 - Classic Solutions Architecture Discussions\004 MyWordPress.com_zh.srt
---

- ：好的, 又是一个有状态的Web应用程序, 我们将把它命名为MyWordPress｡

所以在这里我们试图创建一个完全可扩展的WordPress网站和WordPress是一个非常,

非常常见的方式创建一个网站, 它是非常受欢迎的｡

有托管的WordPress可用,

但人们喜欢在AWS上部署WordPress,

所以我们想访问该网站, 我们想正确显示图片上传, 这样它的工作, WordPress将存储图片的某个地方的一些驱动器,

然后基本上所有的实例必须访问该数据｡

无论如何, 我们将在解决方案体系结构讨论中看到这一点｡

因此,

我们的用户数据､ 博客内容和所有内容都应该存储在MySQL数据库中,

我们希望它能够在全球范围内扩展, 让我们看看如何实现这一目标｡

因此, 我们必须做的第一件事是创建一个具有RDS的层,

我们现在非常熟悉这种在后端具有RDS的体系结构,

它的Multi AZ将是一种通过所有这两个实例的体系结构, 但如果我只是想做得更大, 真正纵向扩展, 也许我想用Aurora MySQL替换此层, 我可以有Multi AZ, 如果我愿意,

我可以读取副本, 甚至是全球数据库

在这里, 我们使用Aurora基本上减少了操作,

这只是我的一个选择, 作为一名解决方案架构师,

您不必做出这样的选择, 但我喜欢Aurora, 我喜欢它的可扩展性更好,

而且更容易编写｡

好的, 很好, 现在我们来谈谈存储映像, 让我们回到非常简单的解决方案体系结构, 此时我们有一个EC2实例,

它连接了一个EBS卷, 因此它位于一个AZ中,

因此我们“我们将看到已加载的答案, 因此用户希望向已加载的答案发送一个图像,

该图像将一直发送到EBS, 因此该图像存储在EBS上, 因此现在运行得非常好,

我们只有一个EC2实例, 所以它直接进入EBS卷, 我们很高兴｡

如果我们想读取该映像,

同样, 可以从EBS卷读取映像并将其发送回用户,

这非常好, 对吗？

当我们开始扩展时, 问题就出现了｡

现在, 我们有两个EC2实例和两个不同的AZ,

每个EC2实例都有自己的EBS卷, 因此,

如果我从该实例发送一个映像, 它将存储在该EBS卷上｡

如果我想读取该映像, 也许我可以这样做, 是的, 我可以读取它, 或者, 这是一个非常常见的错误, 我可以读取该映像, 但它会显示在此处,

而底部的此处没有显示映像, 因为它不是同一个EBS卷, 所以在此处我无法访问映像, 这非常非常糟糕｡

因此, EBS卷的问题是, 当您有一个实例时,

它运行得很好, 但当您开始跨多个AZ或多个实例进行扩展时, 它就开始出现问题｡

因此, 我们已经看到了它以及如何存储它,

基本上我们可以使用EFS, 因此让我们使用完全相同的体系结构,

但现在我们在EFS网络文件系统驱动器中进行记录,

因此EFS是NFS, 因此EFS基本上为弹性网络接口创建ENI, 并创建这些ENI's到每个AZ中,

此ENI可用于所有EC2实例以访问EFS驱动器, 真正酷的是存储在所有实例之间共享, 因此如果我们将一个映像发送到M5实例､

ENI､ EFS, 这样, 如果您想读取映像, 现在该映像将存储在EFS中, 它一直延伸到底部, 穿过ENI, 然后它我们将在EFS上阅读, 是的, EFS提供了该映像,

因此我们可以将其发送回去, 这是一种非常常见的跨多个不同EC2实例扩展网站存储的方法, 允许所有EC2实例访问相同的文件,

而不管它们的可用性区域和我们有多少实例｡

这就是WordPress的微妙之处,

但我想讨论一下EBS与EFS｡

因此, 我们讨论了Aurora数据库,

它基本上具有更少的操作,

并具有多个AZ和读取副本, 我们还讨论了在EBS中存储数据,

当我们使用单实例应用程序时, 它非常有效, 但当我们使用多实例应用程序时, 它就不是很有效了｡

因此, 也许我们可以使用EFS, 然后在多个AZ上部署分布式应用程序, 现在成本方面是EBS更便宜但是, 通过使用EFS, 我们确实获得了很多优势,

尤其是在这类用例中｡ 因此, 作为解决方案架构师, 您需要真正了解所做工作的利弊, 以及您为什么要做这些工作,

以及您所做工作的成本影响｡

我希望这对这节课有帮助,

下节课再见.
