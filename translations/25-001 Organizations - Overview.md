---
source: 25 - Identity and Access Management (IAM) - Advanced\001 Organizations - Overview_zh.srt
---

讲师：现在我们来谈谈AWS组织｡ 

因此, 它是一项全球服务,

允许您同时管理多个AWS帐户｡

因此, 您创建了一个组织,

组织中的主帐户称为管理帐户,

而加入组织或从组织创建的其他帐户称为成员帐户｡

并且成员帐户只能是一个组织的一部分｡ 

组织的最酷之处在于, 所有帐户的计费都是合并的,

因此管理帐户上有一种单一的支付方法, 然后它将支付组织的所有成本｡

但是, 由于您有一个组织,

并且它是一个大家庭的一部分,

因此您可以从聚合使用中获得定价优势｡

因此, 如果您在所有帐户中大量使用EC2或Amazon

S3, 您将获得很大的折扣, 因为它将汇总所有帐户的所有使用情况｡

您还可以跨帐户共享保留实例和储蓄计划折扣｡

因此, 如果一个客户未使用某个预留实例,

另一个客户可以从中受益,

因此折扣适用于整个组织,

这对于节省成本非常有利｡

现在, 还有一个API可以在组织内部自动创建帐户｡

因此, 您可以使用组织非常轻松地创建帐户｡

那这是怎么做到的呢？

我们有一个根组织单位（OU）,

它是您的客户的最外层OU｡

然后在它里面坐着管理帐户｡ 

然后, 您可以创建子OU,

例如, 您可以为dev帐户创建一个OU, 然后在dev

OU中创建成员帐户, 或者您可以为prod帐户创建OU,

并在其中添加成员帐户, 但您可以根据需要自由选择｡

您可以在生产OU中为HR成员帐户创建一个OU,

为财务成员帐户创建一个OU｡

所以你可以按自己的方式组织它｡ 

因此, 对于您的业务和OU, 您有不同的示例｡

因此, 您可以按业务部门进行组织,

例如, 您可以有管理帐户, 然后是销售､

零售和财务OU, 然后是每个OU中的不同帐户, 或者您可以按环境有一个OU｡

例如, 一个OU用于生产, 一个OU用于测试, 一个OU用于开发,

在每个OU中有一些帐户, 或者基于项目, 因此您可以在每个项目中有一个OU,

在每个项目中有一些帐户, 这样, 您就可以混合和匹配, 您可以真正自由地做任何您想做的事情｡

那么使用组织的好处是什么呢？

由于拥有多个帐户, 与拥有一个拥有多个VPC的帐户相比,

您可以获得更好的安全性, 因为帐户比VPC更分散｡

您还可以强制执行用于计费目的的标记标准, 您可以一次性为您的所有帐户启用CloudTrail,

并将所有日志发送到一个中央S3帐户,

或者我们也可以将CloudWatch日志发送到中央日志帐户｡

我们还可以自动建立用于管理目的的跨帐户角色,

这样我们就可以从管理帐户管理所有成员帐户｡

这些都是很大的优势｡ 

此外, 还有一个很大的安全优势,

我们可以定义服务控制策略（SCP）, 它是一个应用于特定OU或帐户的IAM策略, 这使您可以限制用户和角色在帐户中可以执行的所有操作｡

SCP适用于除管理帐户以外的所有帐户, 管理帐户将永远拥有完全的管理权限,

否则您可能会犯错误, 并且永远无法恢复｡

因此, SCP默认情况下不允许任何类似IAM的操作｡

你需要有一个明确的允许的东西工作｡ 

让我们通过一个例子来了解它是如何工作的｡ 

让我们以这个组织为例｡ 

我们有一个根OU和管理帐户,

然后有一个生产OU, 其中有一个帐户A, 然后有两个子OU,

即HR OU和财务OU, 其中有帐户B和帐户C｡

让我们看一下SCP将如何影响每个帐户的权限｡

因此, 在根OU上, 通常会附加完整的AWS访问SCP,

因此根OU内的任何帐户都将对其帐户拥有完全权限｡

这意味着管理帐户, 帐户AIM产品, 帐户B和帐户C,

以及可以做任何他们想做的事情｡

然后我们会应用更多的SCP｡ 

当然, 这是一种方法,

我将向你们展示最常见的方法｡

那么, 让我们在管理帐户上应用DenyAccessAthena

SCP, 在生产中的OU上应用DenyRedshift

SCP, 然后应用更多SCP, 让我们看看它对每个帐户的角度做了什么,

好吗？

因此, 对于管理帐户, 即使我们已经应用了DenyAccessAthena

SCP来拒绝对Athena服务的访问, 管理帐户仍然可以做任何事情, 因为没有SCP应用于它｡

因此, 管理帐户对所有内容都具有完全的管理权限｡

好的, 现在A账户怎么办？

因此, 帐户A位于根OU中, 因此它可以执行许多操作,

然后它也位于生产OU中, 在生产OU上, DenyRedshift

SCP已连接到它, 因此, 帐户A无法访问Redshift,

即使我们在帐户A上连接了一个SCP,

声明已授权Redshift, 因为如果您的策略中存在一个拒绝, 即显式拒绝, 那么默认情况下会被拒绝｡

因此, 在本例中, 帐户A可以执行任何操作,

但不能访问Redshift服务｡

现在, 如果您查看帐户B, 它位于HR OU中, 而HR OU又位于Prod

OU中, 因此它继承了所有内容｡

因此, 帐户B具有来自根OU的完全AWS访问权限､ 来自生产OU的DenyRedshift

SCP权限和来自HR OU的DenyLambda

SCP权限, 因此, 它可以执行除访问Redshift和访问Lambda之外的任何操作｡

现在, 帐户C位于财务OU中, 而财务OU位于生产OU中,

生产OU位于根OU中, 因此它可以执行除访问Redshift之外的任何操作｡

我们已经看到了一些SCP的例子,

希望你们能清楚这一点｡

SCP有两种策略, 一种是阻止列表,

另一种是允许列表｡

因此, 黑名单会说, 嘿, 这里有一些我不想让你使用的服务｡

因此, 通常我们首先附加一个允许星号, 以允许对所有服务执行所有操作,

然后附加一个拒绝语句, 例如, 拒绝对DynamoDB的访问, 或者附加一个不允许选择的允许列表,

例如, 在本例中, 只允许EC2和CloudWatch｡

因此, 只有EC2和CloudWatch被授权在您的帐户上,

其中此SCP已附加和任何其他服务是不可用的, 因为它将需要一个明确的允许使用｡

以上就是关于组织的内容,

希望你们喜欢, 下节课再见.
