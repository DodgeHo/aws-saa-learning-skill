---
source: 06 - EC2 - Solutions Architect Associate Level\002 Private vs Public vs Elastic IP Hands On_zh.srt
---

老师：好的, 让我们来看看知识产权在不同领域的行为｡

我们的实例有一个公共IPv4, 这是我们可以用来SSH到我们的机器上的IPv4,

它工作得很好, 好吗？

因此, 一旦我们登录,

请记住, 我们看到有一个私有IP作为我的实例的主机名｡

所以一旦我们进入, 我们就可以开始使用私有IP｡ 

但是, 如果我们从实例断开连接并尝试执行SSH命令,

但这次使用私有IPv4地址,

正如我们所看到的, 它将无法正常工作｡

好吧, 让我们看看｡  所以我要按回车键｡ 

正如你所看到的, 这不起作用｡  为什麽呢？

好吧, 私有IPv4属于私有网络, 但现在我没有连接到AWS的私有网络｡

我只能通过互联网连接到AWS｡ 

这就是为什么私有IP不起作用｡ 

这就是为什么你必须使用公共IP,

因为公共IP允许你从公共网络访问AWS, 因此公共网络就是互联网｡

好了, 现在让我们来看看我们的实例的行为,

只是为了观察一次｡

当我们启动它时, 停止它并重新启动它｡ 

所以我们要停止实例, 而实例不会停止｡

让我们在这里保存IPv4地址,

以便在屏幕上显示它｡

所以我们要停止实例｡ 

所以我的实例现在已经停止了,

我要启动我的实例, 顺便说一下, 这与重新启动实例不同｡

因此, 您需要停止并启动实例以观察公有IPv4的行为变化｡

所以现在我已经停止并启动了它, 几秒钟后,

我们将获得一个新的公共IPv4｡

我们开始吧

我把这个复制粘贴到这里｡ 

因此, 正如我们所看到的, 是的, 在这个控制台中, 两个IP是不同的｡

因此, 如果我使用以前的IP进行SSH, 这不会发生任何变化,

因为我的实例已经更改了其IPv4｡

但是如果我使用新的IP来执行SSH命令, 那么我可以在我的实例中再次使用SSH｡

但是私有IP没有改变,

因为它不需要改变｡

好吧, 那我们怎么解决这个问题？

因为也许我们想停止并启动我们的实例,

但我们不希望公共IPv4发生变化｡

在这种情况下, 我们必须使用弹性IP｡ 

所以现在你看到这里的弹性IP地址是零｡ 

所以在左手边, 你可以找到弹性IP｡ 

我要在新标签页中打开它｡ 

我们将从亚马逊的IPv4地址池中分配一个新的IP地址｡

这将做的是,

它将创建一个我们现在拥有的IPv4地址,

至少在我们租用它的时候｡

这可以分配给特定的EC2实例, 只要它被连接,

它们就会保留弹性IP｡

所以现在只是一个关于IPv4地址定价的快速说明｡ 

所以现在在AWS中, 如果你使用公共IPv4, 或者如果你不使用公共IPv4,

而它是公共IPv4或弹性IP, 你每小时的费用大约是0美元｡

005每小时, 好吗？

相当于3美元｡  如果你使用或不使用公共IPv4,

每月50美元｡

所以底线是, 如果你不使用它们, 你需要终止你的实例和弹性IP,

这样你就不用支付这笔费用｡

所以在你的帐户中, 如果你从我开始,

那么你每月有750小时的免费公共IPv4地址｡

所以这意味着如果你继续创建EC2实例,

请确保终止它们,

这样你就不会超过IPv4每月750小时的时间,

你就可以开始了｡

我们可以右键单击, 我们可以做动作,

并关联弹性IP地址｡

所以如果我们这样做, 那么我们需要说我们想把它附加到什么上｡

那么它是一个实例还是一个网络接口？

所以这将是一个实例｡ 

我将选择正在运行的实例,

然后选择要关联弹性IP地址的私有IP｡

所以我的实例只有一个私有IP｡ 

所以我们可以走了｡ 

好吧, 我们把它联系起来｡ 

现在让我们看看会发生什么｡ 

所以如果我们回到我们的EC2实例,

我将刷新这个窗口并关闭这些｡

因此, 正如您现在所看到的,

公有IPv4地址现在等于弹性IP地址的值｡

如果我向下滚动并完全刷新它, 正如我们现在所看到的,

弹性IP地址字段在这里也有一个弹性IP地址,

这是一个公共地址｡

现在, 我们可以单击此弹性IP,

这将直接从EC2进入弹性IP控制台, 在那里我们可以获得有关此弹性IP的更多信息｡

所以这很好｡ 

现在我们来看看这是否有效｡ 

所以我们要把地址复制到这里, 然后运行SSH命令,

这个命令不行, 所以我们必须使用新的｡

是的, 我们确实可以做一个SSH｡ 

但现在万一我们停止实例｡ 

所以让我们停止这个实例, 看看会发生什么｡ 

因此, 正如我们现在所看到的, 实例处于停止状态,

但它仍然具有公共IPv4, 因为弹性IP仍然连接到它｡

这意味着, 如果我们再次启动实例, 那么实例将回到运行状态,

弹性IP地址仍然是附加的, 公有IPv4也没有改变｡

所以我们也可以通过再次执行SSH命令来检查这一点｡

是的, 它使用与以前相同的命令工作｡ 

为了完成这一点, 我们可以进入这个弹性IP,

我们可以解除它的关联, 将它从我们的实例中删除｡

然后不要让它运行,

请确保释放这个弹性IP地址,

不要为此付费｡

然后回到我们的EC2实例｡ 

如果我们刷新它, 它已经获得了一个新的公有IPv4地址,

因为它已经从弹性IP中释放出来｡

为了完成这个动手操作,

我可以终止我的实例, 然后就可以开始了｡

这节课就到这里｡ 

希望你们喜欢, 下次课再见｡
