---
source: 08 - High Availability and Scalability ELB & ASG\011 Elastic Load Balancer - Cross Zone Load Balancing_zh.srt
---

教练：现在我们来谈谈跨区域平衡｡ 

让我们举一个非常不平衡的情况的例子,

但它会说明这一点｡

因此, 我们有两个可用性区域, 第一个区域有一个负载平衡器,

其中包含两个EC2实例｡

而第二个也有一个负载平衡器｡ 

因此, 负载平衡器实例显然具有八个EC2实例｡

负载平衡服务实例是同一个更通用的负载平衡器的一部分｡

因此, 客户端正在访问这些负载平衡器｡ 

因此, 通过跨区域负载平衡, 每个负载平衡器实例将在所有可用性区域中的所有注册实例之间均匀分布｡

因此, 客户端本身将50%的流量发送到第一个ALB实例,

并将50%的流量发送到另一个ALB实例｡

但是, 每个ALB将跨所有10个EC2实例重定向流量,

而不管它们位于哪个可用性区域｡

这就是它被称为跨区域负载平衡的原因｡ 

如果你看一下第二个ALB的第一个,

对不起, 它将发送它接收的流量的10%,

好吗？

因为我们有10个实例｡ 

所以他们每个人得到10%的流量｡ 

第一个ALB实例也是如此｡ 

它还将向所有这些实例发送10%的流量｡

因此, 在本例中, 通过跨区域平衡,

我们在所有EC2实例之间平均分配流量｡

然后也许是你想拥有或不想拥有的东西, 谁知道呢,

但至少这种行为对你来说是可用的｡

第二个可用的行为是不进行跨区域平衡｡

因此, 我们采用相同的示例,

但没有跨区域平衡｡

请求, 抱歉, 请求分布在弹性负载均衡器节点的实例中｡

在本例中, 客户端将50%的流量发送到第一个AZ,

将50%的流量发送到第二个AZ｡

但第一个ALB实例将仅向其区域中的EC2实例发送流量｡

因此, 这意味着在这个令人遗憾的能力区域中的每个EC2实例将获得总体流量的25%,

对吗？

所以一半一半｡ 

右侧的实例将再次将其接收的流量划分到在其AZ内注册的EC2实例中｡

所以AZ2

因此, 我们可以看到, 在没有交叉平衡的情况下,

流量包含在每个AZ中｡

但是, 如果每个AZ中的EC2实例数量不平衡,

则特定AZ的某些EC2实例将比其他实例接收更多流量｡

这只是一个选择｡ 

答案没有对错之分｡ 

显然, 这取决于用例｡ 

因此, 对于应用平衡器, 默认情况下将启用跨区域负载平衡,

但您可以在目标组级别禁用它,

并且如果您的数据跨可用性区域传输, 将不会产生任何费用,

因为通常在AWS中, 如果数据从一个AZ传输到另一个AZ, 您将需要支付一些费用｡

但对于应用平衡器,

由于默认情况下启用了跨区域下行,

因此您不会对AZ间数据收取任何费用｡

现在, 如果考虑网络负载平衡器和网关负载平衡器,

则默认情况下禁用跨区域负载平衡｡

如果启用它, 您将需要支付一定的费用,

因为数据将从一个AZ传输到下一个AZ｡

最后, 对于传统负载平衡器,

默认情况下它是禁用的, 如果您启用它,

您将不会为AZ间的数据传输付费｡

好的, 为了便于实际操作, 我创建了一个工作负载平衡器､

一个应用程序平衡器和一个网关负载平衡器｡

我们先来看看网络负载平衡器｡ 

如果我向下滚动并单击属性, 您可以看到跨区域低平衡已关闭,

但我可以编辑此选项并将其打开｡

如您所见, 我将启用跨区域平衡,

这可能包括您的NLB的一些区域费用｡

因此, 这是网关低平衡器的类似设置, 因为它们在这方面具有类似的行为｡

同样, 对于属性, 跨区域负载平衡是关闭的,

但我可以对其进行编辑并将其打开｡

而这将意味着数据收费｡ 

现在, 如果您看一下应用程序负载平衡器,

就会发现它有点不同｡

因此, 如果转到属性,

您可以看到跨区域负载平衡在默认情况下处于打开状态｡

如果我编辑它, 然后向下滚动, 如你所见, 我将在一秒钟内向你展示｡

如你所见, 跨区域平衡一直都是开着的,

好吗？

这条信息你可以丢弃它,

因为我认为它是错误的｡

但无论如何, 跨区域负载平衡始终为ALB打开｡

但是, 如果您转到实际的目标组, 也就是说,

如果我转到为此创建的目标组, 然后转到目标组的属性,

我们实际上可以进行编辑｡

对于此处的跨区域负载平衡, 我们可以从低平衡器属性继承设置（默认情况下处于打开状态）,

也可以强制打开或关闭, 然后针对特定目标组将其关闭｡

在演示经典负载平衡器时,

我这次不会包括它, 因为经典负载平衡器将不再使用｡

它是上一代产品,

很快就要退役了｡

所以我认为你不需要知道它的考试｡

好吧, 让我们看看｡ 

在本课中, 请确保您是否希望按照步骤删除负载平衡器｡

我希望你们喜欢, 我们下节课再见｡
