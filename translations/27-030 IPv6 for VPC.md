---
source: 27 - Networking - VPC\030 IPv6 for VPC_zh.srt
---

教师：我们在本课程中已经讨论了很多有关IPv4的内容,

现在我们来讨论一下IPv6｡

为什么呢？

因为IPv4的设计目的是提供4.

30亿个地址,

发明这一协议的工程师从未想到它们会全部被使用｡

但事实证明, 它们很快就会被耗尽,

因此, 需要一种新的IP方案,

这就是IPv6, 它是IPv4的继承者｡

因此, IPv6旨在提供并等待3.

4乘以10的38次方个唯一IP地址｡ 

因此, 这是大量的IP地址, 而这些IPv6地址中的每一个都将是公共的,

并且可通过Internet路由｡

因此, IPv6范围内没有私有范围｡ 

所以格式是X｡  十､  十､  X八次,

其中X是十六进制,

范围可以是从0000到ffff｡

因此, 您不需要确切了解IPv6是如何形成的,

但这些是IPv6的一些示例｡

我不想在这上面磨蹭｡ 

您可以看一看, 但对您来说重要的是看到一个,

然后说, “哦, 好吧, 这看起来像IPv6,

”IPv6可以有多种形式｡

“好吧,

那么我为什么要谈论IPv6呢？

因为我们可以在VPC中启用IPv6支持｡ 

因此, 您的VPC和子网永远无法禁用IPv4, 但您可以启用IPv6（它们是公共IP地址）,

以便在双协议栈模式下运行｡

这意味着, 当在VPC中启动EC2实例时,

它们将至少获得一个私有内部IPv4和一个公共IPv6,

并且它们可以使用IPv4或IPv6通过互联网网关与互联网通信｡

让我们举个例子｡ 

我们的EC2实例有一个私有IP, 有一个IPv6, 默认情况下是公共的｡

然后, 如果它想访问互联网, 它可以这样做,

通过互联网网关｡

因此, 网关为IPv4和IPv6提供了连接｡

在这种情况下, EC2实例将可以公开访问,

因为它有一个公共IPv6地址, 而Internet网关将提供Internet连接｡

这里有一个测试场景, 是关于IPv6故障排除的｡

因此, 如您所知, 无法为您的VPC和子网禁用IPv4｡

因此, 如果您有一个启用了IPv6的VPC,

但无法在子网中启动EC2实例, 那么这并不是因为该实例无法获取IPv6,

而是因为空间实际上非常非常大, 将有足够的IPv6供EC2实例使用｡

这是因为您的子网中已没有可用的IPv4｡

解决方案是在子网中创建一个IPv4 CIDR｡

让我们看一下这个VPC, 它有一个IPv4空间,

也有一个IPv6空间｡

因此, 我们继续启动EC2实例,

这些实例将获得私有IPv4和公共IPv6｡

所以我们发射, 我们发射, 我们发射他们｡ 

一旦我们用完了IPv4的空间, 如果用户尝试创建新的EC2实例,

它将收到错误, 这不是因为IPv6现在,

而是因为我们子网或VPC中的IPv4空间用完了｡

在这种情况下, 我们要做的是在子网中的VPC内添加一个新的CIDR,

这样我们就可以开始启动新的EC2实例,

并获得不同的IP IPv4地址范围, 但我们将继续这样解决此问题｡

好了, 关于AWS中IPv6的理论就讲到这里,

我们下一节课再见,

只是做一点练习｡
