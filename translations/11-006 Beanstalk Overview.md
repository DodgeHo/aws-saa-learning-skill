---
source: 11 - Classic Solutions Architecture Discussions\006 Beanstalk Overview_zh.srt
---

教练：好的, 现在我们来谈谈弹性豆茎｡

到目前为止, 在本课程中,

当我们部署一个应用程序时, 我们都有相同的架构｡

因此, 我们有一个负载均衡器,

它接收来自用户的所有请求, 然后我们有一个具有多个可用区域的自动伸缩组,

在每个AZ中, 将有一些EC2实例部署在那里, 然后在后端, 我们可能有一些数据库, 所以我们有一个RDS数据库来进行读取和写入,

也许我们有副本等等｡

如果你在缓存层, 在缓存层,

我们需要看看ElastiCache, 好吗？

因此, 如果有如此多的应用程序供我们部署, 并且它们遵循相同的架构,

那么每次重新创建它可能会很痛苦｡

因此, 作为一个开发人员, 管理基础设施､

部署代码是很复杂的, 我们不想配置所有的数据库､ 负载均衡器等等｡

当然, 我们希望一切都能扩展｡ 

正如我们所看到的, 大多数Web应用程序都具有相同的架构,

带有负载均衡器和自动伸缩组, 作为开发人员,

我所要做的就是运行代码, 好吗？

我不想担心其他的事｡ 

同样, 如果我使用不同的编程语言进行开发, 并且有不同的应用程序和环境,

我可能需要一种部署应用程序的方法, 这就是Beanstalk发挥作用的地方｡

因此, Beanstalk提供了一个以开发人员为中心的在AWS上部署应用程序的视图｡

这个想法是, 从一个单一的接口,

它将重用我们以前见过的所有组件,

如EC2, ASG, ELB, RDS, 但它将是一个托管服务,

将为您部署所有这些东西｡

因此, 它将处理容量供应,

它将处理负载均衡器的所有配置,

扩展, 应用程序健康监控, 实例配置等｡

作为开发人员, 你唯一的责任就是代码本身,

好吗？

您仍然可以完全控制每个组件的配置,

但至少它们在Beanstalk中捆绑为一个单一的接口,

而且Beanstalk也有一种非常酷的更新应用程序的方式｡

所以Beanstalk服务本身是免费的,

但是你要为Beanstalk､

ASG或ELB等使用的底层实例付费｡

因此Beanstalk的组件由一个应用程序组成,

应用程序是Beanstalk组件的集合,

例如环境, 版本和配置｡

应用程序本身的版本是应用程序代码的迭代｡

所以你可以有版本一,

版本二, 版本三, 等等, 等等｡

然后是一个环境, 它只是运行特定应用程序版本的资源的集合｡

因此, 在一个环境中, 一次只能有一个应用程序版本,

我们可以看到, 我们实际上可以将环境中的应用程序版本从版本1更新到版本2｡

我们有层次, 所以我们可以有两个不同的层次｡ 

在Beanstalk中, 我们有Web服务器环境层和worker环境层｡

我们很快就会看到这些｡ 

我们还可以在Beanstalk中创建多个环境,

例如开发, 测试和生产以及您真正想要的任何环境｡

所以这个过程是创建一个应用程序,

然后我们上传一个版本｡

然后, 我们将启动一个环境, 然后我们将管理环境生命周期,

如果我们想更新它, 我们可以通过上传新版本来更新版本, 然后在我们的环境中再次部署新版本以更新我们的应用程序堆栈｡

因此, Beanstalk支持许多编程语言,

如Go, Java SE, Java with Tomcat, ｡ NET Core on Linux. NET在Windows服务器上运行｡

js,

PHP, Python, Ruby, Packer Builder, Single Docker

Container, Multi Docker Container, Pre-configured Docker.

因此, 我们的想法是, 在Beanstalk上, 你应该能够部署几乎任何东西｡

最后, 服务器层和工作者层是什么意思？

Web层是这样的｡ 

这是我们所知道的传统架构, 我们有一个负载均衡器,

然后它将流量发送到一个自动伸缩组, 该组有多个EC2实例,

这些实例将成为您的Web服务器｡

这是Beanstalk的第一个架构,

而Beanstalk的第二个架构将围绕一个工人环境｡

所以这次没有客户端直接访问您的EC2实例｡

我们将使用SQS队列,

这是一个消息队列, 消息将被发送到SQS队列,

EC2实例将成为工作者, 因为它们将从SQS队列中提取消息以处理它们｡

在这种情况下, 工作环境将根据SQS消息的数量进行扩展｡

所以消息越多, EC2实例就越多｡ 

最酷的是, 您可以将Web环境和工作环境放在一起,

让Web环境将一些消息推送到工作环境的SQS队列中｡

最后, 您需要了解Beanstalk的两种部署模式｡

第一个是单个实例,

这对于开发来说非常有用｡

在这种情况下, 您将有一个具有弹性IP的EC2实例,

它也可能启动RDS数据库等, 但这一切都基于一个具有弹性IP的实例｡

它非常适合开发目的, 但是如果您想要扩展真正的Elastic

Beanstalk模式, 那么您将使用负载均衡器获得高可用性,

这对于生产环境非常有用, 在这种情况下, 您可以使用负载均衡器将负载分布在多个EC2实例中, 这些实例为自动伸缩组和多个可用区域进行管理｡

最后, 您可能有一个RDS数据库, 它也是多AZ的,

有一个主数据库和一个备用数据库｡

好了就这样

希望你们喜欢, 下次课再见｡
