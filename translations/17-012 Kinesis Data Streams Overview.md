---
source: 17 - Decoupling applications SQS, SNS, Kinesis, Active MQ\012 Kinesis Data Streams Overview_zh.srt
---

- ：所以您需要了解的第一个服务是Kinesis数据流｡

Kinesis数据流是一种在系统中传输大数据的方式｡

因此, Kinesis数据流由多个碎片组成,

并且碎片被编号｡

一号二号一直到N号｡ 

这是您必须提前调配的内容｡ 

所以当你开始使用Kinesis数据流时,

你会说, 嘿, 我想要一个有六个碎片的流｡

因此, 数据将被分割到所有碎片中｡ 

好吗？

这些碎片将定义您的流容量,

即摄取和消耗速率｡

所以, 现在, 让我们从这个开始｡ 

然后我们有制片人｡ 

因此, 生产者将数据发送到Kinesis数据流中,

生产者可以是多个｡

它们可以是应用程序,

也可以是具有桌面或移动客户端的客户端, 它们可以在非常非常低的级别利用AWS

SDK, 或者在更高的级别利用Kinesis

Producer Library（KPL）, 我们将在接下来的课程中深入探讨这些生成器,

或者它可以是服务器内部的Kinesis Agent, 用于流传输, 例如将应用程序日志传输到Kinesis数据流｡

所以所有的制作人都做同样的事情｡ 

他们对SDK的依赖程度非常非常低, 他们会将记录生成到我们的Kinesis数据流中｡

因此, 从根本上讲, 记录由两部分组成,

一部分是分区密钥, 另一部分是数据blob,

即最大为1 MB的值｡

因此分区键将定义并帮助确定记录将转到哪个分片｡

而数据blob就是值本身｡ 

因此, 当您让生成器将数据发送到Kinesis数据流时,

它们可以以每秒1兆字节或每秒1000条消息的速率发送数据｡

如果你有六个碎片, 你每秒可以得到六兆字节,

或者每秒6,000条消息, 总的来说, 好吗？

现在, 一旦数据进入Kinesis数据流,

它就可以被许多消费者使用, 这些消费者也可以有许多形式, 我们将在本节中详细探讨它们｡

因此, 我们有一些应用程序,

它们可能依赖于SDK或更高级别的Kinesis客户端库,

即KCL｡ 如果你想在Kinesis数据流上进行无服务器处理,

它们可以是Lambda函数｡

它可以是动力学数据消防管,

正如我们将在本节中看到的,

或动力学数据分析｡

因此, 当消费者收到一条记录时,

它会再次收到分区键､ 表示记录在碎片中位置的序列号以及数据blob,

也就是数据本身｡

现在, 我们有了不同的Kinesis数据流使用模式｡

我们有每秒两兆字节的吞吐量,

由所有使用者共享, 每个碎片, 好吗？

或者, 如果启用增强型消费者模式（增强型扇出）,

则每个消费者､ 每个碎片每秒可获得2 MB｡

因此, 我们将在本节中更详细地再次讨论它｡

同样, 生产者将数据发送到Kinesis数据流｡ 

它在那里停留一段时间, 然后被许多不同的消费者阅读｡

好的, Kinesis数据流的一些属性｡ 

第一个优点是可以将保留时间设置为1天到365天之间｡

这意味着默认情况下,

您可以重新处理或重放数据｡

一旦将数据插入Kinesis,

就无法删除｡

这就是永恒性｡ 

此外, 当您将消息发送到Kinesis数据流时,

您将添加一个分区键｡ 共享相同分区密钥的消息将进入相同的分片,

这将提供基于密钥的排序｡

对于制作者, 您可以使用SDK､ Kinesis Producer库､

KPL或Kinesis代理发送数据｡

而对于消费者来说, 你可以自己写｡ 

因此, 您可以使用Kinesis客户端库､ KCL或SDK, 也可以使用AWS上的托管消费者,

例如AWS Lambda､ Kinesis Data Firehose或Kinesis Data Analytics｡

现在对于容量模式,

您有两个Kinesis数据流选项｡

第一种模式是历史容量模式,

称为资源调配模式｡

因此, 您可以选择提供的多个碎片,

然后手动或使用API对其进行扩展｡

而Kinesis数据流中的每个碎片将获得每秒1兆字节,

或每秒1000条记录｡

对于输出吞吐量, 每个碎片将获得每秒2

MB的吞吐量, 这适用于传统或扇出消费者｡

您还可以按每小时调配的碎片付费｡ 

因此, 您需要提前考虑很多问题,

这也是它被称为配置模式的原因｡

但第二种模式是一种称为按需模式的神经模式｡ 

在这种情况下, 您不需要调配或管理容量｡

这意味着容量将随时间推移按需调整｡

您将获得所调配的默认容量,

即每秒4 MB或4, 000条记录, 然后将根据在过去30天内观察到的吞吐量峰值进行自动扩展｡

在这种模式下, 你仍然要按每小时的数据流和每GB的数据输入/输出付费｡

因此, 我们采用了不同的定价模式｡ 

因此, 如果您不知道容量事件, 请选择按需模式, 但如果您可以计划容量事件,

则应选择资源调配模式｡

就Kinesis数据流的安全性而言,

它部署在一个区域内｡

所以你有你的碎片｡ 

您可以使用IAM策略控制生成和读取碎片的访问权限｡

在传输过程中使用HTTPS加密,

在静止过程中使用KMS加密｡

您可以在客户端实现自己对数据的加密和解密,

这称为客户端加密, 但实现起来比较困难,

因为您需要自己对数据进行加密和解密｡

但这增强了安全性｡ 

VPC终点可用于室壁运动｡ 

这允许您直接从HTTPS访问Kinesis,

例如在私人主题中,

而不需要通过互联网｡

最后, 所有的API调用都可以使用CloudTrail进行监控｡

以上就是Kinesis数据流的概述｡ 

希望你喜欢｡ 

我会在下一节课上看到你们, 我们会更深入地探讨Kinesis数据流中的所有活动部分｡
