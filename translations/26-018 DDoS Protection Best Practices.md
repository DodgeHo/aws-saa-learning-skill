---
source: 26 - AWS Security & Encryption KMS, SSM Parameter Store, Shield, WAF\018 DDoS Protection Best Practices_zh.srt
---

讲师：这是一堂更侧重于解决方案架构的课程,

主要围绕DDoS防护和最佳实践展开｡

假设您有这种体系结构, 我们有一个包含EC2实例的自动扩展组｡

它由弹性负载平衡器提供前端,

然后您的负载平衡器可以由全局加速器作为固定IP公开,

也可以由CloudFront提供前端｡

CloudFront可以链接到WAF､

Web应用程序防火墙等｡

您可以将Route 53用于DNS路由｡ 

最后, 您还可以使用另一种架构, 其中包含CloudFront和API网关｡

所以这只是代表你可以做的组合｡

显然, 不止一个｡ 

但是我们要讨论的是,

由于BP1, 最佳实践1,

最佳实践2, 等等｡

DDoS弹性方面的影响,

好吗？

因此, 通过使用CloudFront, 我们实际上处于边缘｡ 

这张幻灯片是关于边缘位置缓解的｡ 

这意味着您的Web应用程序交付处于边缘,

因此您将通过使用Shield来抵御DDoS常见攻击,

这只是Shield的正常设置, 因此SYN泛洪和UDP反射｡

如果您使用Global Accelerator,

它将能够访问世界各地的应用程序, 同样, 也是在边缘｡

此外, 它还与Shield完全集成,

可提供DDoS保护｡

因此, 如果您的后端与CloudFront不兼容,

这将非常有用｡

在这种情况下, 您会在它前面有Global Accelerator｡

这意味着, 无论您使用的是CloudFront还是Global

Accelerator, 您都将完全分布在AWS的边缘, 并且边缘位置将受到DDoS保护｡

此外, 如果您使用Route 53,

则域名解析是全局性的｡

它位于边缘,

而且您的DNS上也有DDoS保护机制｡

因此, 我们知道, 如果我们在边缘, 我们可以有一个更好的DDoS保护｡

接下来, 我们可以了解DDoS缓解的最佳实践｡ 

首先, 我们来看一下基础架构层防御｡ 

这是BP1､ BP3和BP6｡ 

因此, 我们的想法是通过使用CloudFront､ Global

Accelerator､ Route 53和弹性负载平衡,

保护Amazon EC2实例免受高流量的影响｡

通过使用所有这些服务, 流量将在到达EC2实例之前由其中的大多数服务处理｡

现在, 如果我们启用EC2实例的自动缩放功能,

这意味着如果流量确实到达我们的自动缩放组,

我们可以自动进行缩放,

以适应应用程序上的更大负载｡

如果我们使用弹性负载平衡,

则ELB将自动将流量分散到多个EC2实例中｡

因此, 这意味着EC2实例将拥有可管理的流量,

当然, 前提是自动扩展组也进行了扩展｡

现在, 在应用层防御中,

我们可以在BP1和BP2检测和过滤恶意请求｡

因此, 我们的想法是,

CloudFront将提供静态内容,

并从边缘位置提供, 从而保护后端｡

然后, 您可以在CloudFront或您的应用程序负载平衡器上使用WAF,

根据请求签名过滤和阻止请求｡

例如, 您可以阻止特定的IP､

特定的请求类型等｡

如果您使用WAF基于速率的规则,

您可以自动阻止恶意行为者的IP｡

因此, 您可以在WAF上使用一系列托管规则来基于信誉阻止IP或阻止匿名IP等｡

使用CloudFront, 您可以阻止特定的地理位置｡ 

其理念是CloudFront和WAF是托管服务,

因此它们会为您过滤一些请求,

这样您就可以免受DDoS攻击｡

当然, 使用Shield

Advanced, 如果您启用它,

它将自动为您创建WAF规则, 以减轻第7层攻击｡

因此, 这对于应用层防御是有好处的, 同样,

它可以保护您的EC2实例免受任何错误请求的影响,

或者至少将错误请求的数量降到最低｡

还有, 我们如何减少我们的攻击面？

因此, 此架构的理念是隐藏用于服务应用程序的后端AWS资源｡

因此, 我们有BP1､ BP4和BP6｡ 

因此, 如果您使用CloudFront､ API

Gateway或弹性负载平衡,

我们可以隐藏后端资源｡

攻击者永远不会知道它是Lambda函数､

EC2实例还是ECS任务等等, 因为我们已经在它们前面使用了其他东西｡

此外, 我们还可以设置安全组和网络ACL,

以根据特定IP过滤流量｡

弹性IP, 如果我们使用它们,

它们也可以受到AWS Shield Advanced保护｡

然后, 您可以保护API端点本身｡ 

因此, 如果您使用API网关,

则可以隐藏任何后端, 无论是EC2､

Lambda还是其他后端｡

如果你使用边缘优化模式, 你已经是全球化的了｡

否则, 您可以使用CloudFront加上区域模式,

为DDoS保护提供更多控制｡

如果您在API网关上使用WAF,

则可以过滤任何HTTP请求｡

如果您正确设置了API网关, 您可以设置突发限制,

可以进行报头过滤, 还可以为您的用户使用和强制使用API密钥, 从而保护您自己免受DDoS攻击｡

希望这种架构是有意义的, 并且您了解了防范DDoS的不同方法,

因为考试会要求您这样思考, 好吗？

这节课就讲到这里｡ 

我希望你们喜欢,

下节课再见｡
