---
source: 14 - Amazon S3 Security\010 S3 Access Logs - Hands On_zh.srt
---

教师：下面我们来练习一下S3访问日志｡

为此, 我将创建一个S3访问日志来查找V3存储桶｡

然后我将继续创建这个桶｡ 

这个桶就是我们的伐木桶,

我把这个打开.

在另一个选项卡中, 我将选择一个已创建的存储桶,

然后启用日志记录｡

所以我只拿了一桶,

但不管你想要什么桶｡

我将进入“属性”, 然后向下滚动并查找“服务器访问日志记录”｡

“所以我们编辑它,

并启用服务器访问日志记录｡

因此, 正如我们所看到的,

当我们这样做时, 存储桶策略将在目标存储桶中更新,

好吗？

那么我们要在哪里登陆｡ 

对于目标存储桶, 我们将浏览Amazon

S3, 然后选择S3访问日志来查找V3存储桶｡

我保存了更改, 现在我的S3服务器访问日志记录已启用｡

现在我可以做的是转到我的对象,

我可以单击这个对象, 我可以打开它回到我的桶中, 我可以进入它并上传文件｡

## 学习目标

- 会为目标桶启用 S3 服务器访问日志（Server access logging），并配置日志接收桶。
- 理解访问日志的生成延迟、内容和相关的桶策略更改。

## 重点速览

- 启用服务器访问日志时，需要指定一个目标（日志）桶，S3 会把访问记录写入该桶。
- 启用日志功能会自动更新目标桶的桶策略以允许 S3 日志服务写入对象。
- 访问日志需要一段时间才能交付，日志文件包含 API 调用、请求者、时间戳、对象等信息。

## 详细内容

1. 启用流程（Hands-on 概览）
- 在源桶的 `Properties -> Server access logging` 中启用日志记录，选择或创建一个目标日志桶（建议使用专门的日志桶）。
- 保存设置后，系统会在目标桶中创建或更新桶策略，允许 S3 日志服务将日志对象写入。

2. 生成与查看日志
- 上传或访问源桶中的对象会生成活动；这些活动会被写入日志桶，但日志交付通常有延迟（分钟到数小时不等）。
- 在目标桶中打开日志文件，可查看包含的字段：请求的 API、来源 IP、请求时间、请求者、返回状态码、传输字节等。

3. 注意事项
- 指定专门的日志桶并限制对该桶的普通访问，有助于分离日志与业务数据。
- 日志格式可能难以直接阅读，通常需要解析或导入分析工具以获得有用的指标。

## 自测问题

1. 如何为一个 S3 桶启用服务器访问日志？需要配置哪些目标？
2. 启用后为何马上看不到日志？如何确认日志功能正常？
3. 访问日志里通常包含哪些关键信息？
