---
source: 26 - AWS Security & Encryption KMS, SSM Parameter Store, Shield, WAF\013 AWS Certificate Manager (ACM)_zh.srt
---

教师：现在,

我们来讨论AWS证书管理器服务, 也称为ACM｡

因此, 借助ACM, 您可以轻松地在AWS上配置､

管理和部署TLS证书｡

TLS证书的用途是什么？

他们有时会说SSL｡ 

因此, 它们被用来为网站提供飞行中加密｡

你知道, 当你访问网站时,

上面写着HTTPS, S代表安全,

因此你知道交易中涉及到TLS证书｡

那么, 当您有一个ALB（例如,

连接到自动扩展组, 但您希望将应用平衡器公开为HTTPS端点）时,

该如何工作呢？

因此, 您可以将其与证书管理器集成,

直接在应用平衡器上提供和维护TLS证书, 您的用户将使用HTTPS协议访问您的网站或API｡

所以ACM支持公共和私有TLS证书, 如果你想使用公共TLS证书,

它是免费的｡

还有一个自动续订这些证书的功能｡

我们稍后将在其他幻灯片中看到这一点,

您可以与许多AWS服务集成｡

因此, 您可以在弹性负载平衡器上加载TLS证书｡ 

例如, 经典的应用程序平衡器或网络负载平衡器｡

CloudFront Distributions或API网关上的任何API｡

您不能将AWS证书管理器与EC2实例一起使用｡

因此, 对于公共证书, 并且仅对于公共证书,

不能提取它们｡

因此, 您不能通过ACM为EC2实例创建公共证书｡

那么, 申请公共证书的过程是什么呢？

首先, 您需要列出要包含在证书中的域名｡

因此, 可能有一个完全限定的域名FQDN,

如corp｡ 示例中｡  com, 也可以是通配符域,

例如星号｡

示例中｡  com的网站｡ 

您可以根据需要包含任意多个域｡ 

然后选择验证方法｡ 

是通过DNS验证还是通过电子邮件验证？

为了实现自动化,

当涉及到自动续订SSL证书时, DNS验证将是首选方法｡

对于电子邮件验证,

ACM将向您的域名注册商的联系地址发送电子邮件, 并验证您是否请求了该证书｡

如果您决定进行DNS验证, 则必须在DNS配置中创建CNAME记录,

以验证您是否拥有该域｡

例如, 如果你有53号公路,

那么它会自动与ACM集成, 为你做这件事｡

接下来, 您必须等待几个小时来获得验证,

然后您的证书将被颁发｡

并且这些公共证书也将被登记为自动续订｡

这意味着ACM将在到期前60天自动续订任何ACM生成的证书,

这让您高枕无忧｡

那么, 当涉及到ACM时,

如果导入一个公共证书会怎么样呢？

因此, 您可以选择在ACM之外实际生成证书,

然后将其导入ACM｡

但在这种情况下, 因为它是在ACM之外生成的,

所以没有自动续订｡

因此, 在现有证书过期之前, 您需要导入一个新证书｡

您如何知道证书何时过期？

那么, ACM服务将在到期前45天开始向事件桥服务发送每日到期事件｡

和天数都可以配置｡ 

你可以设定45, 你可以设定30, 任何你想要的｡ 

这意味着每天, 您将在EventBridge中有一个使证书过期的事件,

这是一种方法｡

然后从EventBridge中,

您可以触发Lambda函数或SNS主题或SQL､

SQS｡

还有另一种使用AWS Config的方法｡ 

在Config中有一个被管理的规则,

称为ACM证书过期检查｡

它将检查是否有过期证书｡ 

您可以重新配置天数｡ 

因此, Config服务将具有一个检查ACM服务的规则｡

然后, 如果任何证书被视为不符合, 则不符合事件将被发送到EventBridge｡

同样, 我们可以触发Lambda､ SNS或SQS｡ 

有两种方法可以获得这些自动警报｡ 

现在, ACM服务如何与ALB集成？

我们已经看到了一种在后端具有自动缩放组的ALB,

我们可以通过ACM服务配置和维护TLS证书｡

但有一个非常好的特异性｡ 

在您的ALB上, 您可以设置从HTP到HTTPS的重定向规则｡ 

这意味着, 如果您的用户通过HTP协议访问您的应用程序平衡器,

ALB将返回一个重定向, 并告诉您需要重定向到HTTPS｡

因此, 用户现在回到HTTPS协议上的应用程序平衡器,

因此它将利用来自证书管理器的TLS证书｡

然后, 一旦请求通过HTTPS协议,

它将被定向到您的自动缩放组｡

让我们来看看ACM如何与API网关集成｡ 

但首先我们必须记住端点类型｡ 

因此, 我们为API网关提供了边缘优化端点类型｡ 

这是当您的客户端是全球性的,

请求将首先通过CloudFront

Edge位置路由以改善延迟, 然后发送到仍然只存在于一个区域的API网关｡

您还可以使用“区域”类型的端点,

其中客户端与API网关位于同一区域内｡

在这种情况下, 我们没有可用的CloudFront,

但如果您愿意, 我们仍然可以创建我们自己的CloudFront分发, 以便对缓存和分发策略进行更多的控制｡

然后, 我们有专用API网关端点,

只能使用接口VPC端点从VPC内部访问这些端点, 我们需要使用资源策略来定义在专用模式下对此API网关的访问｡

因此, ACM适用于边缘优化和区域终端｡ 

让我们来看看｡ 

因此, 要将ACM与API网关集成, 首先我们需要在API网关中创建一个名为“自定义域名”的资源,

然后我们需要对其进行配置｡

因此, 对于边缘优化的端点, 由于请求是通过CloudFront路由的,

因此TLS证书将附加到您的CloudFront分发中｡

因此, TLS证书必须在与CloudFront相同的区域创建,

即us-east-1｡

因此, 您的API网关位于一个地区, 但所有内容都通过CloudFront分发,

并且您的ACM证书必须位于us-east-1地区, 因为这是CloudFront所在的地区｡

CloudFront的所有证书都在us-east-1中｡ 

因此, 然后我们在53号公路上设置一个CNAME或别名记录｡

还有区域端点, 用于与API网关位于同一区域的客户端,

因此, 由于我们只有一个API网关, 因此TLS证书必须在与API阶段位于同一区域的API网关上导入｡

因此, 在这个例子中,

我的ACM只在ap-setheast-2｡

然后, 我们在Route 53中设置一个CNAME或别名记录,

以指向您的DNS｡

就是这样｡ 

因此, 在本课程中, 您已经了解了很多有关AWS Certificate

Manager的信息｡

我希望你们喜欢, 下节课再见｡
