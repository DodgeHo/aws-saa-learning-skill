---
source: 24 - AWS Monitoring & Audit CloudWatch, CloudTrail & Config\008 CloudWatch Alarms Hands On_zh.srt
---

- ：好的, 现在我们进入CloudWatch

Alarms, 让我们创建一个警报｡

首先, 我将快速创建一个EC2实例,

并在CPU利用率的基础上创建一个警报｡

因此, 我们将继续创建一个t2 micro的EC2实例｡ 

我会快速地进行预览和发布, 然后说,

是的, 我有这个｡

所以我们不需要保留它或类似的东西,

我们只需要启动实例｡

我们希望创建一个警报,

如果CPU达到100%, 该警报将终止实例, 因此我们创建此警报｡

因此, 我们需要选择一个度量｡ 

因此, 我们需要选择一个度量标准｡ 

因此, 我们需要找到EC2实例｡ 

这是我们的实例ID, 就在这里, 然后搜索它｡ 

我可能有点太快了, 好吧｡ 

因此, 让我们等待实例启动｡ 

我将按实例指标进入EC2,

然后等待它填充｡

因此, 大约花了五分钟的时间, 一些指标才显示在我的实例的云仪表盘中｡

现在, 我可以刷新此页面, 找到我需要的指标｡

因此, 让我选择一个指标, 然后将实例粘贴到perfect中,

我有了它, 我将找到我的实例的CPU利用率｡

这就是这个指标｡ 

好吧, 那么, 选择这个指标｡ 

如您所见, 我们这里有8个,

然后我们可以选择一种方法来计算此指标, 例如平均值､

总和､ 最大值等｡

我们要评估此警报的期间｡ 

因此, 五分钟是最好的, 因为如果我们不启用详细监控,

此指标每五分钟填充一次｡

现在我们得到了一些关于阈值的条件｡ 

那么, 它是静态的还是异常检测？

是否为大于､ 等于等｡ 

举个例子,

如果你的得分在很长一段时间内都高于95%,

那么, 这里你可以说,

三分之三｡

也就是说, 在15分钟内, 你会被卡在95%的速度上,

那么这台机器可能出了什么问题｡

在这种情况下, 我可以选择通知｡ 

我可以选择“自动缩放”操作｡ 

我可以选择EC2操作, 或者在系统管理器操作中,

但我将选择EC2操作｡

好的, 它会说, 嘿, 如果你处于警报状态, 好的, 那就终止这个实例,

因为我可能知道我的应用程序有时会出现严重故障,

CPU安装将在很长一段时间内处于95%或100%的状态, 解决这个问题的唯一方法就是终止这个实例｡

因此, 我将选择此选项, 然后单击“下一步”, 并说“终止”,

EC2 on high

CPU｡

单击“下一步”以验证所有内容, 然后我们就可以开始了｡ 

所以现在这个警报显然没有足够的数据, 所以我们需要等待15分钟,

直到它恢复正常, 除非我们让它恢复正常,

否则它不会被触发｡

因此, 我们可以进入EC2实例并启动一种方法,

使CPU在15分钟内处于非常高的状态,

但这将是一个非常长的时间, 或者我们可以使用API调用名称“设置警报状态”,

以真正了解如果此警报进入违规阶段会发生什么｡

让我们来看看｡ 

这是警报的历史记录｡ 

接下来, 我将设置警报, 输入AWS

CloudWatch, 设置警报状态, 然后我们将查看API参考｡

因此我们需要设置报警状态, 即报警名称､

状态值和状态原因｡

那我们就在这里吧｡ 

因此AWS CloudWatch设置报警状态, 然后我们需要设置多个参数｡

因此, 报警名称将是这个,

然后是报警, 因此状态值将是报警｡

而国家的原因, 马上就要受到考验了｡ 

我们回车, 现在这个报警, 如果我们查阅这个页面现在是处于报警状态,

可以看到, 它表示处于报警状态｡

因此, 操作是, 在报警时终止实例｡ 

如果您查看历史记录,

它会显示警报从OK更新为in alarm,

然后执行了一个操作, 并成功执行了终止EC2实例的操作｡

因此, 如果我进入我的EC2实例并进行刷新,

我们可以看到它正在关闭并被终止,

因为在此EC2实例上触发了警报, 并且我们设置了警报以执行此特定操作｡

就这样了, 希望你喜欢｡ 

我希望这对你有意义｡ 

我们下节课再见｡
