---
source: 13 - Advanced Amazon S3\006 S3 Performance_zh.srt
---

- ：所以, 我们必须谈谈S3基线性能｡ 

因此, 默认情况下, Amazon S3会自动扩展到非常非常高的请求数,

并且具有非常非常低的S3, 在100到200毫秒之间从S3中获取第一个字节｡

这是相当快的｡ 

就每秒可以获得多少请求而言, 您可以在桶中每秒获得3,

500个PUT/COPY/POST/DELETE, 每个前缀,

每秒5, 500个GET/HEAD请求｡

这是你们可以在网站上找到的,

我认为它不是很清楚,

所以我会给你们解释每秒每个前缀是什么意思｡

但在病毒中,

这意味着它的性能非常高, 而且,

对存储桶中的前缀数量没有限制｡

因此, 让我们以四个名为file的对象为例,

并分析该对象的前缀｡

第一个在你的存储桶里, 在文件夹一,

子文件夹一的斜杠文件里｡

在这种情况下, 前缀将是桶和文件之间的任何内容｡

所以, 在这种情况下, 它是斜杠文件夹一, 斜杠子一｡ 

所以, 这意味着对于这个前缀中的文件,

每秒可以获得3, 500个Put和5, 500个Gets｡

现在, 如果我们有另一个文件夹1, 然后是sub 2, 前缀是buckets和file之间的任何值,

所以斜杠文件夹1斜杠sub 2,

所以我们也会得到3,500个Put和5,500个Gets,

以此类推｡

如果我有一个和两个, 我们有不同的前缀, 现在很容易理解前缀是什么,

所以很容易理解一个桶中每个前缀每秒3,500次Put和5,500次Gets的规则｡

因此, 这意味着如果你将读取平均分布在上面的所有四个前缀上,

你可以实现每秒22, 000个Head和Gets请求｡

现在, 让我们谈谈S3的性能,

我们如何优化它？

第一个是多部分上传｡ 

因此, 建议对超过100

MB的文件使用多部分上传,

并且必须用于超过5 GB的文件｡

而多部分上传所做的是,

它并行上传, 这将有助于我们加快传输,

以最大限度地提高带宽｡

所以, 作为一个图表, 它总是更有意义｡ 

因此, 我们有一个字节文件,

我们希望将该文件上传到Amazon S3｡

我们将把它分成几部分, 所以这些文件的小块和每个文件都将并行上传到Amazon

S3｡

在Amazon S3中, 一旦上传了所有部分,

就可以将它们重新组合到大文件中｡

好的, 非常重要｡ 

现在, 我们有了S3传输加速,

用于上传和下载, 通过将文件传输到AWS边缘位置来提高传输速度,

该位置将数据转发到目标区域中的S3存储桶｡

因此, 边缘位置比区域多｡ 

今天大约有200多个边缘位置, 而且还在增长,

让我在图表中向您展示这意味着什么？

这就是S3传输加速与多部分上传兼容｡

我们来看看

我们在美国有一个文件, 我们想将其上传到澳大利亚的S3

bucket｡

所以, 这将做的是, 我们将上传该文件通过一个边缘位置在美国,

这将是非常, 非常快, 然后我们将使用公共互联网｡

然后从该边缘位置传输到澳大利亚的Amazon

S3存储桶, 边缘位置将通过快速的私有AWS网络传输｡

所以, 这被称为传输加速,

因为我们最小化了我们通过的公共互联网的数量,

并最大化了我们通过的私有AWS网络的数量｡

因此, 传输加速是加快传输的一种很好的方法｡

好吧, 现在去拿文件怎么样？

如何以最有效的方式读取文件？

我们有一个叫做S3字节范围获取的东西,

所以它可以通过获取文件的特定字节范围来瘫痪Gets｡

因此, 如果您无法获得特定字节范围,

则可以重试较小的字节范围,

并且在失败时具有更好的恢复能力｡

所以, 这次可以用它来加速下载｡ 

让我们试试S3中的一个文件, 它非常非常大,

这就是这个文件｡

也许你想请求第一部分,

也就是文件的前几个字节,

然后是第二部分, 最后是结束部分｡

因此, 我们请求所有这些部分作为特定的字节范围提取,

这就是为什么它被称为字节范围, 因为我们只请求文件的特定范围｡

所有这些请求都可以并行进行｡ 

所以, 我们的想法是, 我们可以并行获取和加速下载｡

第二个用例是只检索文件的一部分｡

例如, 如果你知道S3中文件的前50个字节是一个头,

并给你一些关于该文件的信息,

那么你可以使用第一个50个字节发出头请求到字节范围请求, 你会很快得到这些信息｡

好了, 这就是S3的性能｡ 

我们已经看到了如何加快上传-下载｡ 

我们已经看到了基线性能, 我们已经看到了KMS的限制｡

所以, 确保你们知道那些要参加考试的人,

我们下节课再见｡
