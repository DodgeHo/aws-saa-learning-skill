---
source: 16 - AWS Storage Extras\004 Amazon FSx_zh.srt
---

讲师：现在我们来谈谈Amazon FSx｡ 

因此, Amazon

FSx允许您在AWS上启动第三方高性能文件系统,

作为一项完全托管的服务｡

例如, 对于RDS, 您希望在AWS上启动MySQL或PostgreSQL｡

嗯, 对于FSx, 它与RDS相同, 但适用于文件系统｡ 

例如, 您可以在FSx上启动Lustre, 也可以在FSx上启动Windows文件服务器,

还可以在FSx上启动NetApp ONTAP或OpenZFS｡

在你们看这节课的时候,

可能会有更多的内容,

只有当我发现一些重要的文件系统在考试中出现时,

我才会更新这节课？

但你需要知道你面前的四个人｡ 

那么我们就来一一看看吧｡ 

首先, 让我们了解一下Amazon FSx for

Windows文件服务器｡

因此, 它是一个完全受管理的Windows文件服务器共享驱动器｡ 

因为它是Windows, 所以它支持SMB协议和Windows

NTFS｡

此外, 因为它是Windows, 所以它支持与Microsoft

Active Directory集成, 从而为您的用户提供安全性｡

它还使用ACL､ 访问控制列表和用户配额｡ 

不过, Amazon FSx for Windows File

Server有一个特殊之处,

即使它看起来像是专用于Windows的,

但您也可以将其安装在Linux EC2实例上｡

你必须记住这一点｡ 

如果您在某个地方（例如内部部署）有一个现有的Windows文件服务器,

则可以使用Microsoft分布式文件系统DFS功能将您的文件系统分组在一起, 从而将您的FSx

for Windows文件服务器加入内部部署的Windows文件服务器｡

现在, 就性能而言,

它可以扩展到每秒数十GB､ 数百万IOPS和数百PB的数据｡

适用于Windows文件服务器的FSx的存储选项是SSD,

可获得延迟非常低的敏感型工作负载, 例如数据库､

媒体处理､ 数据分析｡

或者, 如果您希望拥有广泛的工作负载,

则可以使用更便宜的HDD,

例如, 主目录或CMS｡

现在, 您可以使用专用连接从内部部署基础架构访问FSx for

Windows File Server,

还可以将FSx for Windows

File Server配置为Multi-AZ以实现高可用性｡

最后, 您的所有数据每天都会备份到Amazon S3,

以便进行灾难恢复｡

现在, 我们来讨论第二种Amazon FSx, 即适用于Lustre的Amazon

FSx｡

Lustre用于构建一个分布式文件系统,

该系统将用于大规模计算｡

所以一旦我解释了“光泽”这个词,

它就会有意义了｡

Lustre是从Linux和集群派生而来的｡ 

它用于机器学习和高性能计算（HPC）｡

这是一个关键字, 你需要寻找知道你需要FSx的Lustre｡

因此, 您可以拥有视频处理､ 金融建模､

电子设计自动化等应用｡

您拥有巨大的规模,

因此可以扩展到每秒数百GB的数据量､

数百万IOPS和亚毫秒级延迟｡

对于存储, 有两种选择,

一种是SSD, 用于极低延迟､ IOPS密集型工作负载以及小型和随机文件操作;另一种是HDD,

用于吞吐量密集型工作负载以及大型和顺序文件操作｡

而且SSD将比HDD更贵｡ 

您可以与Amazon S3无缝集成｡ 

这意味着您可以通过FSx将S3作为文件系统读取,

并且可以将FSx的计算输出写回Amazon

S3｡

这是考试可能会问你的问题｡ 

最后, Amazon FSx for Lustre可通过VPN或直接连接从内部部署服务器使用｡

对于FSx, 您还需要了解文件系统部署选项｡

有两个你需要知道｡ 

有临时文件系统和持久性文件系统｡ 

因此, 临时文件系统将作为临时存储,

并且不会复制数据｡

这意味着您有一个文件, 如果底层服务器发生故障,

您将丢失该文件｡

但由于这种优化, 我们得到了非常高的突发｡ 

因此, 我们的性能是持久性文件系统的六倍,

例如, 每TB的吞吐量为每秒200 MB｡

所以它实际上非常非常大｡ 

因此, 暂存文件系统的使用情形是对数据进行短期处理,

并且您希望通过不复制数据来优化成本｡

这意味着您有FSx, 您的计算实例将在AZ1和AZ2上连接,

然后FSx for Lustre暂存文件系统只有您的数据的一个副本, 如图所示｡

就一份好吗

最后, 您还可以为数据存储库提供可选的S3

bucket｡

对于持久性文件系统,

它将用于长期存储｡

数据将在同一可用性区域内复制,

因此不是跨AZ复制, 而是在同一AZ内复制｡

但这意味着, 如果底层服务器出现故障,

那么文件将在几分钟内被透明地替换｡

因此, 正如其名称所示, 持久性文件系统的使用情形是长期处理和存储敏感数据｡

因此, 在架构方面的想法完全相同｡

请记住, FSx仅在Lustre的一个AZ内存在｡

持久模式下的FSx for Lustre文件系统将有两个数据副本,

因此您可以看到, 现在有一些从一个数据卷到下一个数据卷的复制｡

接下来是适用于NetApp ONTAP的Amazon FSx｡ 

因此, 它是AWS上的受管NetApp ONTAP文件系统｡ 

而且此文件系统与NFS､

SMB和iSCSI协议兼容｡

因此, 您可以使用适用于NetApp

ONTAP文件系统的FSx, 将内部部署系统中已在ONTAP上运行或在NAS上运行的工作负载迁移到AWS｡

因此它与不同的操作系统具有广泛的兼容性｡

因此, 它可以与Linux､ Windows和macOS以及AWS､

WorkSpaces､ AppStream､ EC2､

ECS和EKS上的VMware Cloud配合使用,

这些服务您在本课程中可能还没有见过｡

但这个想法是它有非常,

非常, 非常广泛的兼容性｡

在此基础上,

这些存储将自动缩减或增长｡

因此, 它具有自动缩放功能, 这很酷｡ 

然后, 您可以使用复制､ 快照和复制功能｡

它成本低, 可以进行数据压缩｡ 

此外, 您还可以执行重复数据消除｡ 

因此, 您可以在NetApp ONTAP上查找文件的重复项｡ 

最后一点非常有用, 您可以执行时间点即时克隆,

这对于测试新工作负载和您要测试的工作负载非常有用｡

例如, 您需要快速克隆您的文件系统,

然后您就有了一个临时文件系统｡

因此, 当考试提示您应该使用NetApp

ONTAP时, 您需要注意以下一些优势｡

最后, 我们有适用于OpenZFS的Amazon FSx｡ 

因此, 它是AWS上的托管OpenZFS文件系统,

在多个版本上仅与NFS协议兼容｡

主要用例是将已经在ZFS上运行的工作负载从内部迁移到AWS｡

它还具有与Linux､ Mac､ Windows等广泛的兼容性｡

而这一个真的是很好的表现｡ 

您可以将IOPS扩展至100万次,

而所需时间不到0. 5毫秒延迟, 支持快照､

压缩和低成本, 但不支持重复数据删除｡

与NetApp ONTAP一样,

它也支持时间点即时克隆, 这对于测试新工作负载也非常有用｡

因此, 所有这些信息应该足以让您回答考试中的问题,

为正确的使用情形选择正确的文件系统｡

好吧, 就这样｡ 

我希望你们喜欢, 下节课再见｡
