```markdown
**学习目标**

- 理解消息可见性超时（Visibility Timeout）的概念及其对重复处理的影响。
- 掌握如何通过 `ChangeMessageVisibility` 调整单条消息的可见性以防止重复处理。

**重点速览**

- 可见性超时：消费者读取消息后该消息在其他消费者中不可见的时间窗口，默认 30 秒（可设置 0 秒到 12 小时）。
- 若在超时内未删除消息，消息会重新变为可见并可能被再次处理（导致至少一次投递）。

**详细内容**

- 工作原理：消费者调用 ReceiveMessage 后，SQS 将该消息标记为不可见并开始计时；消费者应在处理完成后调用 DeleteMessage 来移除消息。若处理耗时超过可见性超时而未扩展，消息会再次回到队列并被另一个消费者接收。
- 实务建议：为耗时任务设置合理的可见性超时，或在处理过程中调用 `ChangeMessageVisibility` 延长可见性窗口；不要将默认超时设得过长以免消费者宕机导致消息长时间不可见。
- 配置范围：可在队列级别设置默认可见性超时，也可在消费端针对单条消息动态调整。

**自测问题**

1. 可见性超时的默认值是多少？如果消费者需要更多时间，应如何避免消息被重复处理？
2. 将可见性超时设置过长或过短分别会带来什么问题？

```
