---
source: 24 - AWS Monitoring & Audit CloudWatch, CloudTrail & Config\015 AWS Config - Overview_zh.srt
---

教师：好的, 让我们看一下AWS配置｡ 

配置是一项服务, 它允许您根据您将要设置的一些规则,

审核并记录AWS中资源的合规性, 您还可以记录配置及其随时间的变化, 以便在需要时快速回滚并了解基础架构中发生了什么｡

因此, Config可以解决的一些问题是,

是否存在对我的安全组的不受限制的SSH访问？

或者我的水桶有任何人公开访问？

或者, 是否存在随时间而更改的ALB配置？

然后, 根据这些规则是否合规, 您可以收到任何更改的警报或SNS通知｡

Config是一个按区域的服务,

因此如果需要, 您需要为所有区域配置它,

您可以跨区域和帐户聚合数据, 将其集中到一个位置,

您还可以将所有资源的配置存储到Amazon历史记录中, 以便稍后进行分析,

例如, 通过Athena等无服务器查询引擎进行分析｡

那么, 哪些类型的规则将进入Config？

您可以使用AWS管理的配置规则, 您可以使用超过75个规则,

或者您可以创建自己的配置规则｡

在这种情况下, 您需要自己定义该规则｡ 

我们使用的是Lambda函数｡ 

例如, 您可以评估每个EBS磁盘的类型是否为gp2,

或者开发帐户中的每两个实例的类型是否为t2｡

微型的

每当配置要更改时, 可以评估或触发某些规则｡

因此, 无论何时, 例如,

您有一个新的配置您的EBS磁盘,

请评估您的EBS磁盘的类型, 或者您也可以有规则,

以评估在定期的时间间隔｡

例如, 每两个小时,

请确保我所有的EBS光盘都是类型gp2｡

现在, 配置规则仅用于合规性｡ 

它们不会阻止动作的发生｡ 

这不是对任何内容的拒绝操作｡ 

它不能取代IAM等安全机制｡ 

好的, 但它确实为您提供了配置和资源合规性的概述｡

现在配置没有前途了｡ 

它可以是相当昂贵的非常快｡ 

你将支付0｡  003美分, 每个地区记录的项目和0.

每个区域每个配置规则评估001美分｡

现在, 对于公司资源,

您将能够查看资源在一段时间内的合规性｡

例如, 安全组已不符合｡ 

然后您可以查看config资源随时间的配置,

好吗？

您可以查看更改时间和更改者等信息, 还可以将其链接到CloudTrail以查看为该资源进行的API调用｡

这样你就能全面了解发生的一切｡

现在, 虽然您无法拒绝在配置中执行任何操作,

但您可以使用SSM

Automation Documents对不合规的资源进行补救｡

例如, 您可以监视IAM访问密钥是否已过期｡

例如, 超过90天｡ 

在这种情况下, 您要将它们标记为不符合｡ 

因此, 这不会防止它们不符合,

但您可以在资源不符合时触发补救操作｡

例如, 有一个名为RevokeUnusedIAMUserCredentials的SSM文档｡

也许你想使用这个然后它将被应用到你拥有的任何资源上？

在这种情况下,

它将停用您的IAM访问密钥｡

因此, 无论是使用AWS管理的文档还是创建您自己的自动化文档,

您都可以对不合规的资源进行补救,

明白吗？

如果你想让它完成所有的脚本编写,

你可以创建一个文档,

调用Lambda函数,

你可以在那里做任何你想做的事情｡

最后, 您的修正可能会重试｡ 

因此, 如果资源在自动修复后仍不符合法规遵从性,

则它可以重试（例如, 最多五次）｡

那么最后, 通知又是怎么回事？

我们可以使用if EventBridge来触发通知,

只要我们的资源不符合要求｡

例如, 我们监控我们的安全组,

它就变得不符合法规｡

然后我们可以在EventBridge中触发一个事件,

然后将其传递给您想要的任何资源｡

或者, 您也可以将所有更改和所有资源通知的合规性从Config传递到SNS｡

因此, 如果您只想筛选一个配置项,

只筛选某些事件, 您可以使用SNS筛选来筛选SNS主题,

然后您可以将这些通知发送给它, 例如, 发送到管理员电子邮件或空闲通道等, 以便在一个位置获得所有这些通知｡

这就是配置｡ 

我希望你们喜欢它,

下一节课你们会亲自动手｡
